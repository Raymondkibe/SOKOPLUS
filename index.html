<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>SOKOPLUS | Marketplace & Social Platform</title>

<meta name="description" content="Post products, jobs, and social updates. Earn 50% on referrals. Free posts for subscribed users. Boost your posts for visibility." />
<meta name="keywords" content="sokoplus, marketplace, social media, jobs, kenya, earn money, referrals, business" />

<!-- Open Graph / Facebook / WhatsApp -->
<meta property="og:title" content="SOKOPLUS – Kenya’s All-In-One Marketplace" />
<meta property="og:description" content="Buy & Sell, Jobs, Business Tools & Earn 50% Referral Commission. Join SOKOPLUS today!" />
<meta property="og:image" content="https://sokoplus.vercel.app/og-image.png" />
<meta property="og:url" content="https://sokoplus.vercel.app/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="SOKOPLUS" />

<!-- Image size -->
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="SOKOPLUS Kenya Marketplace" />

<!-- Twitter / X -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="SOKOPLUS – Kenya’s All-In-One Marketplace" />
<meta name="twitter:description" content="Buy, Sell, Find Jobs & Earn 50% Referral Commission on SOKOPLUS." />
<meta name="twitter:image" content="https://sokoplus.vercel.app/og-image.png" />    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           GLOBAL STYLES & VARIABLES - BLUE, YELLOW, PURPLE THEME
        ============================================ */
        :root {
            --primary: #4F46E5; /* Vibrant Blue */
            --primary-dark: #4338CA;
            --primary-light: #6366F1;
            --secondary: #F59E0B; /* Amber Yellow */
            --secondary-dark: #D97706;
            --accent: #8B5CF6; /* Vibrant Purple */
            --accent-dark: #7C3AED;
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --info: #3B82F6;
            --business: #06B6D4; /* Cyan for business features */
            
            --dark: #0F172A;
            --dark-gray: #1E293B;
            --gray: #475569;
            --light-gray: #94A3B8;
            --lighter-gray: #CBD5E1;
            --lightest-gray: #F1F5F9;
            --white: #FFFFFF;
            
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.3);
            --shadow: 0 4px 8px rgba(0,0,0,0.4);
            --shadow-md: 0 6px 12px rgba(0,0,0,0.5);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.6);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.7);
            
            --radius-sm: 6px;
            --radius: 10px;
            --radius-md: 14px;
            --radius-lg: 18px;
            --radius-xl: 24px;
            --radius-full: 9999px;
            
            --transition-fast: all 0.2s ease;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--lighter-gray);
            background-color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--white);
        }
        
        h1 { font-size: clamp(2rem, 5vw, 3.5rem); }
        h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); }
        h3 { font-size: clamp(1.5rem, 3.5vw, 2rem); }
        h4 { font-size: clamp(1.25rem, 3vw, 1.75rem); }
        h5 { font-size: clamp(1.125rem, 2.5vw, 1.5rem); }
        h6 { font-size: clamp(1rem, 2vw, 1.25rem); }
        
        /* ============================================
           CONTAINER
        ============================================ */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* ============================================
           HEADER & NAVIGATION
        ============================================ */
        .header {
            background: var(--dark-gray);
            box-shadow: var(--shadow);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 70px;
            border-bottom: 2px solid var(--primary);
        }
        
        .nav-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            font-family: 'Montserrat', sans-serif;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 1.5rem;
            font-weight: 900;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .logo-text {
            font-size: 1.75rem;
            font-weight: 900;
            color: var(--white);
            display: flex;
            flex-direction: column;
            line-height: 1.2;
        }
        
        .logo-text span {
            color: var(--secondary);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .logo-tagline {
            font-size: 0.75rem;
            color: var(--light-gray);
            font-weight: 400;
            font-family: 'Poppins', sans-serif;
        }
        
        .mobile-menu-btn {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            padding: 8px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .mobile-menu-btn span {
            display: block;
            width: 100%;
            height: 3px;
            background: var(--secondary);
            border-radius: 2px;
            transition: var(--transition);
        }
        
        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }
        
        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        .nav-menu {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .nav-links {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            color: var(--light-gray);
            text-decoration: none;
            border-radius: var(--radius);
            transition: var(--transition-fast);
            font-weight: 500;
            white-space: nowrap;
        }
        
        .nav-link:hover, .nav-link.active {
            background: rgba(79, 70, 229, 0.15);
            color: var(--primary-light);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .nav-link i {
            font-size: 1.1rem;
        }
        
        .user-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-weight: 600;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition-fast);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .user-avatar:hover {
            border-color: var(--secondary);
            transform: scale(1.05);
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: var(--transition-fast);
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-align: center;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: var(--dark);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            background: linear-gradient(135deg, #FBBF24, var(--secondary));
        }
        
        .btn-accent {
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: var(--white);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        .btn-business {
            background: linear-gradient(135deg, var(--business), #0891B2);
            color: var(--white);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--gray);
            color: var(--light-gray);
        }
        
        .btn-outline:hover {
            border-color: var(--primary-light);
            color: var(--primary-light);
            background: rgba(99, 102, 241, 0.1);
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        
        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }
        
        /* ============================================
           ENHANCED HERO SECTION
        ============================================ */
        .hero-section {
            padding: 6rem 0;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.1) 0%, rgba(13, 20, 35, 0.9) 100%), 
                        radial-gradient(circle at 20% 80%, rgba(79, 70, 229, 0.2) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.2) 0%, transparent 50%);
            border-radius: 0 0 var(--radius-xl) var(--radius-xl);
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
            min-height: 90vh;
            display: flex;
            align-items: center;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            pointer-events: none;
        }
        
        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--secondary), var(--primary-light), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-block;
        }
        
        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            line-height: 1.2;
            margin-bottom: 1.5rem;
        }
        
        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--lighter-gray);
            margin-bottom: 2.5rem;
            max-width: 600px;
        }
        
        .highlight {
            color: var(--secondary);
            font-weight: 600;
        }
        
        .hero-cta {
            display: flex;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }
        
        .hero-stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin: 3rem 0;
        }
        
        @media (min-width: 768px) {
            .hero-stats-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .stat-card {
            background: rgba(30, 30, 46, 0.7);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            border: 1px solid rgba(99, 102, 241, 0.3);
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-light);
            box-shadow: 0 10px 30px rgba(79, 70, 229, 0.3);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            background: rgba(79, 70, 229, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: var(--primary-light);
            font-size: 1.25rem;
        }
        
        .stat-number {
            display: block;
            font-size: 2rem;
            font-weight: 800;
            color: var(--secondary);
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--light-gray);
            margin-top: 0.5rem;
            display: block;
        }
        
        .hero-features {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .feature-tag {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: var(--success);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-full);
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .hero-visual {
            position: relative;
            height: 500px;
        }
        
        .floating-card {
            position: absolute;
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            border: 1px solid var(--gray);
            box-shadow: var(--shadow-lg);
            width: 160px;
            z-index: 2;
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-card.card-1 {
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }
        
        .floating-card.card-2 {
            top: 40%;
            right: 10%;
            animation-delay: 2s;
        }
        
        .floating-card.card-3 {
            bottom: 20%;
            left: 15%;
            animation-delay: 4s;
        }
        
        .card-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            margin-bottom: 1rem;
        }
        
        .floating-card h4 {
            font-size: 0.875rem;
            color: var(--white);
            margin-bottom: 0.25rem;
        }
        
        .floating-card p {
            font-size: 1rem;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .hero-illustration {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }
        
        .phone-mockup {
            width: 280px;
            height: 500px;
            background: linear-gradient(135deg, var(--dark-gray), #1a1a2e);
            border-radius: 40px;
            padding: 15px;
            position: relative;
            border: 3px solid var(--primary);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }
        
        .phone-screen {
            width: 100%;
            height: 100%;
            background: var(--dark);
            border-radius: 30px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .app-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--secondary);
            padding: 1rem;
            text-align: center;
            font-weight: 700;
            font-size: 1.25rem;
        }
        
        .app-content {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .app-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--dark-gray);
            border-radius: var(--radius);
            color: var(--light-gray);
            transition: var(--transition-fast);
        }
        
        .app-item.active {
            background: var(--primary);
            color: var(--white);
            border-left: 4px solid var(--secondary);
        }
        
        .app-item i {
            font-size: 1.25rem;
        }
        
        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            color: var(--light-gray);
            animation: bounce 2s infinite;
            cursor: pointer;
        }
        
        .scroll-indicator i {
            font-size: 1.5rem;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(79, 70, 229, 0); }
            100% { box-shadow: 0 0 0 0 rgba(79, 70, 229, 0); }
        }
        
        /* Fix for mobile responsiveness */
        @media (max-width: 768px) {
            .hero-visual {
                display: none;
            }
            
            .hero-stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero-features {
                justify-content: center;
            }
            
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .hero-cta {
                justify-content: center;
            }
        }
        
        /* ============================================
           MEDIA UPLOAD STYLES
        ============================================ */
        .media-preview-container {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .media-preview {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: var(--radius);
            overflow: hidden;
            border: 2px solid var(--gray);
            background: var(--dark-gray);
        }
        
        .media-preview img, .media-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .media-preview .remove-media {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .upload-area {
            border: 2px dashed var(--gray);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--dark-gray);
            margin-bottom: 1rem;
        }
        
        .upload-area:hover {
            border-color: var(--primary-light);
            background: rgba(99, 102, 241, 0.1);
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: var(--primary-light);
            margin-bottom: 1rem;
        }
        
        .media-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .media-gallery-item {
            width: 100%;
            height: 150px;
            border-radius: var(--radius);
            overflow: hidden;
            position: relative;
            background: var(--dark-gray);
        }
        
        .media-gallery-item img, .media-gallery-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ============================================
           CHATBOT STYLES
        ============================================ */
        .chatbot-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transition: var(--transition);
            border: 2px solid var(--secondary);
        }
        
        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        
        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: var(--dark-gray);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--primary);
        }
        
        .chatbot-container.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }
        
        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--secondary);
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--secondary);
        }
        
        .chatbot-close {
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .chatbot-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: var(--dark);
        }
        
        .chat-message {
            margin-bottom: 1rem;
            max-width: 80%;
        }
        
        .chat-message.bot {
            align-self: flex-start;
        }
        
        .chat-message.user {
            align-self: flex-end;
            margin-left: auto;
        }
        
        .message-bubble {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-lg);
            background: var(--dark-gray);
            box-shadow: var(--shadow-sm);
            display: inline-block;
            border: 1px solid var(--gray);
        }
        
        .message-bubble.bot {
            background: var(--dark-gray);
            border-top-left-radius: 5px;
            border-left: 3px solid var(--primary);
        }
        
        .message-bubble.user {
            background: var(--primary);
            color: var(--white);
            border-top-right-radius: 5px;
            border-right: 3px solid var(--secondary);
        }
        
        .chatbot-input {
            padding: 1rem;
            border-top: 1px solid var(--gray);
            display: flex;
            gap: 0.5rem;
            background: var(--dark-gray);
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--gray);
            border-radius: var(--radius);
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: var(--white);
        }
        
        .quick-questions {
            padding: 1rem;
            border-top: 1px solid var(--gray);
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            background: var(--dark-gray);
        }
        
        .quick-question {
            padding: 0.5rem 0.75rem;
            background: var(--dark);
            border: 1px solid var(--gray);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            cursor: pointer;
            transition: var(--transition-fast);
            color: var(--light-gray);
        }
        
        .quick-question:hover {
            background: var(--primary);
            color: var(--white);
        }
        
        /* ============================================
           MAIN CONTENT & LAYOUT
        ============================================ */
        .main-container {
            padding-top: 80px;
            min-height: calc(100vh - 200px);
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ============================================
           FEATURES GRID - ENHANCED
        ============================================ */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 4rem 0;
        }
        
        .feature-card {
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            padding: 2.5rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--gray);
            position: relative;
            overflow: hidden;
            height: 100%;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }
        
        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border-radius: var(--radius-lg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transition: var(--transition);
        }
        
        .feature-card:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
        }
        
        .feature-icon.primary {
            background: rgba(79, 70, 229, 0.2);
            color: var(--primary-light);
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .feature-icon.secondary {
            background: rgba(245, 158, 11, 0.2);
            color: var(--secondary);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .feature-icon.accent {
            background: rgba(139, 92, 246, 0.2);
            color: var(--accent);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        /* ============================================
           NEW HOMEPAGE SECTIONS
        ============================================ */
        .trending-section {
            margin: 4rem 0;
        }
        
        .trending-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .trending-item {
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            border: 1px solid transparent;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .trending-item:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }
        
        .trending-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .trending-icon.blue { background: rgba(79, 70, 229, 0.2); color: var(--primary); }
        .trending-icon.yellow { background: rgba(245, 158, 11, 0.2); color: var(--secondary); }
        .trending-icon.purple { background: rgba(139, 92, 246, 0.2); color: var(--accent); }
        
        /* ============================================
           TESTIMONIALS SECTION
        ============================================ */
        .testimonials-section {
            margin: 6rem 0;
            position: relative;
        }
        
        .testimonials-slider {
            display: flex;
            overflow-x: auto;
            gap: 2rem;
            padding: 2rem 0;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) var(--dark);
        }
        
        .testimonial-card {
            min-width: 350px;
            background: var(--dark-gray);
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            position: relative;
            border: 1px solid var(--gray);
        }
        
        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 5rem;
            color: var(--primary);
            opacity: 0.3;
            font-family: serif;
        }
        
        .testimonial-content {
            margin-bottom: 2rem;
            position: relative;
            z-index: 1;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        /* ============================================
           CONTENT CARDS & GRIDS
        ============================================ */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .section-title {
            position: relative;
            padding-bottom: 0.5rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
            border-radius: 2px;
        }
        
        .content-tabs {
            display: flex;
            gap: 0.5rem;
            border-bottom: 2px solid var(--gray);
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            color: var(--light-gray);
            font-weight: 600;
            cursor: pointer;
            border-radius: var(--radius) var(--radius) 0 0;
            transition: var(--transition-fast);
            white-space: nowrap;
        }
        
        .tab-btn:hover {
            color: var(--primary-light);
            background: rgba(99, 102, 241, 0.1);
        }
        
        .tab-btn.active {
            color: var(--secondary);
            background: var(--dark-gray);
            border-bottom: 3px solid var(--secondary);
        }
        
        .content-grid {
            display: grid;
            gap: 1.5rem;
        }
        
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
        
        .card {
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid var(--gray);
            position: relative;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }
        
        .product-card .card-image {
            height: 200px;
            position: relative;
            overflow: hidden;
        }
        
        .product-card .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .product-card:hover .card-image img {
            transform: scale(1.1);
        }
        
        .product-card .boost-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: var(--dark);
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            z-index: 2;
        }
        
        .product-card .card-content {
            padding: 1.5rem;
        }
        
        .product-card .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--white);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .product-card .card-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 1rem;
        }
        
        .social-card .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem 1.5rem 1rem;
        }
        
        .social-card .user-avatar-sm {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .social-card .post-content {
            padding: 0 1.5rem 1rem;
        }
        
        .social-card .post-actions {
            display: flex;
            justify-content: space-around;
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--gray);
        }
        
        .social-card .post-action {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: none;
            border: none;
            color: var(--light-gray);
            cursor: pointer;
            transition: var(--transition-fast);
        }
        
        .social-card .post-action:hover {
            color: var(--primary-light);
        }
        
        .job-card .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray);
        }
        
        .job-card .job-type {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(79, 70, 229, 0.2);
            color: var(--primary-light);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .job-card .card-content {
            padding: 1.5rem;
        }
        
        .job-card .job-salary {
            color: var(--secondary);
            font-weight: 600;
            margin: 1rem 0;
        }
        
        /* ============================================
           POST CREATION FORMS
        ============================================ */
        .post-creation-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .post-tab {
            padding: 1rem 1.5rem;
            background: var(--dark-gray);
            border: 2px solid var(--gray);
            border-radius: var(--radius);
            color: var(--light-gray);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            min-width: 200px;
            justify-content: center;
        }
        
        .post-tab:hover {
            border-color: var(--primary-light);
            color: var(--primary-light);
        }
        
        .post-tab.active {
            border-color: var(--primary-light);
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary-light);
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-card {
            background: var(--dark-gray);
            border-radius: var(--radius-xl);
            padding: 3rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--primary);
        }
        
        .form-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--white);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--white);
        }
        
        .form-control {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--gray);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: var(--transition-fast);
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: var(--white);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .form-textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .media-upload {
            border: 2px dashed var(--gray);
            border-radius: var(--radius);
            padding: 3rem 1rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: var(--dark);
        }
        
        .media-upload:hover {
            border-color: var(--primary-light);
            background: rgba(99, 102, 241, 0.05);
        }
        
        /* ============================================
           DASHBOARD - ENHANCED
        ============================================ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .stat-card {
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            border: 1px solid var(--gray);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.75rem;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 0.25rem;
            color: var(--white);
        }
        
        .earnings-card {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            border-radius: var(--radius-xl);
            padding: 2.5rem;
            margin: 3rem 0;
            border: 2px solid var(--secondary);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        
        .earnings-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.2;
            animation: moveBackground 20s linear infinite;
        }
        
        @keyframes moveBackground {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ============================================
           BUSINESS TOOLS - ENHANCED SECTION
        ============================================ */
        .business-tools-section {
            margin: 4rem 0;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .tool-card {
            background: var(--dark-gray);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .tool-card:hover {
            border-color: var(--business);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(6, 182, 212, 0.2);
        }
        
        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(6, 182, 212, 0.1));
            opacity: 0;
            transition: var(--transition);
        }
        
        .tool-card:hover::before {
            opacity: 1;
        }
        
        .tool-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            background: rgba(6, 182, 212, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--business);
            border: 2px solid var(--business);
        }
        
        .tool-coming-soon {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--secondary);
            color: var(--dark);
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* ============================================
           MODALS
        ============================================ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: var(--dark-gray);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
            position: relative;
            border: 2px solid var(--primary);
        }
        
        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--secondary);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .modal-close:hover {
            background: var(--dark);
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* ============================================
           NOTIFICATIONS
        ============================================ */
        .notification {
            position: fixed;
            top: 80px;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: var(--radius);
            color: var(--white);
            font-weight: 500;
            box-shadow: var(--shadow-xl);
            z-index: 3000;
            animation: slideIn 0.3s ease;
            max-width: 400px;
            word-wrap: break-word;
            border-left: 4px solid var(--secondary);
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* ============================================
           FOOTER
        ============================================ */
        .footer {
            background: var(--dark-gray);
            color: var(--light-gray);
            margin-top: 4rem;
            border-top: 2px solid var(--primary);
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            padding: 4rem 0;
        }
        
        .footer-bottom {
            text-align: center;
            padding: 2rem 0;
            border-top: 1px solid var(--gray);
            color: var(--light-gray);
            font-size: 0.875rem;
        }
        
        /* ============================================
           RESPONSIVE DESIGN
        ============================================ */
        @media (max-width: 1200px) {
            .hero-content { grid-template-columns: 1fr; }
            .hero-visual { display: none; }
        }
        
        @media (max-width: 768px) {
            .mobile-menu-btn { display: flex; }
            
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: var(--dark-gray);
                flex-direction: column;
                padding: 2rem 1.5rem;
                transition: var(--transition);
                overflow-y: auto;
                gap: 0;
                border-top: 2px solid var(--primary);
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .nav-links {
                flex-direction: column;
                width: 100%;
                gap: 0.5rem;
                margin-bottom: 2rem;
            }
            
            .nav-link {
                width: 100%;
                justify-content: flex-start;
            }
            
            .user-section {
                flex-direction: column;
                width: 100%;
                gap: 1rem;
                padding-top: 1rem;
                border-top: 1px solid var(--gray);
            }
            
            .hero-content {
                gap: 2rem;
            }
            
            .hero-stats-container {
                flex-wrap: wrap;
                justify-content: flex-start;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .form-card {
                padding: 1.5rem;
            }
            
            .chatbot-container {
                width: 90%;
                right: 5%;
                bottom: 80px;
            }
        }
        
        @media (max-width: 576px) {
            .hero-section { padding: 3rem 0; }
            .features-grid { grid-template-columns: 1fr; }
            .grid-3, .grid-4 { grid-template-columns: 1fr; }
            .post-tab { min-width: 100%; }
            .testimonial-card { min-width: 280px; }
        }
        
        /* ============================================
           UTILITY CLASSES
        ============================================ */
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }
        .mb-1 { margin-bottom: 1rem; }
        .mb-2 { margin-bottom: 2rem; }
        .mb-3 { margin-bottom: 3rem; }
        .mt-1 { margin-top: 1rem; }
        .mt-2 { margin-top: 2rem; }
        .mt-3 { margin-top: 3rem; }
        .w-full { width: 100%; }
        .hidden { display: none !important; }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-1 { gap: 1rem; }
        .gap-2 { gap: 2rem; }
        .gap-3 { gap: 3rem; }
        
        .badge {
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .badge-success { background: rgba(16, 185, 129, 0.2); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.3); }
        .badge-warning { background: rgba(245, 158, 11, 0.2); color: var(--warning); border: 1px solid rgba(245, 158, 11, 0.3); }
        .badge-danger { background: rgba(239, 68, 68, 0.2); color: var(--danger); border: 1px solid rgba(239, 68, 68, 0.3); }
        .badge-info { background: rgba(59, 130, 246, 0.2); color: var(--info); border: 1px solid rgba(59, 130, 246, 0.3); }
        .badge-primary { background: rgba(79, 70, 229, 0.2); color: var(--primary-light); border: 1px solid rgba(99, 102, 241, 0.3); }
        .badge-secondary { background: rgba(245, 158, 11, 0.2); color: var(--secondary); border: 1px solid rgba(245, 158, 11, 0.3); }
        .badge-accent { background: rgba(139, 92, 246, 0.2); color: var(--accent); border: 1px solid rgba(139, 92, 246, 0.3); }
        
        .empty-state {
            text-align: center;
            padding: 4rem 1rem;
            color: var(--gray);
            grid-column: 1 / -1;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: var(--gray);
        }
        
        /* ============================================
           PASSWORD RECOVERY STYLES
        ============================================ */
        .recovery-steps {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .step {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--dark);
            border-radius: var(--radius);
            border-left: 4px solid var(--primary);
            border: 1px solid var(--gray);
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            background: var(--primary);
            color: var(--secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
        
        /* ============================================
           PROFILE STYLES
        ============================================ */
        .profile-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--gray);
        }
        
        .profile-avatar-lg {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 2.5rem;
            font-weight: 600;
            border: 3px solid var(--secondary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .profile-info h3 {
            margin-bottom: 0.5rem;
        }
        
        .profile-info p {
            color: var(--light-gray);
            margin-bottom: 0.5rem;
        }

        /* ============================================
           ADMIN SPECIFIC STYLES
        ============================================ */
        .admin-table {
            width: 100%;
            background: var(--dark);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--gray);
        }
        
        .admin-table th {
            background: var(--primary);
            color: var(--white);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        .admin-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--gray);
            color: var(--light-gray);
        }
        
        .admin-table tr:hover {
            background: var(--dark-gray);
        }
        
        .admin-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        /* ============================================
           PAYMENT OPTIONS STYLES
        ============================================ */
        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .payment-option {
            background: var(--dark);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 2px solid var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .payment-option:hover {
            border-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .payment-option.selected {
            border-color: var(--secondary);
            background: rgba(245, 158, 11, 0.1);
        }
        
        .payment-option-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .payment-option-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 1.5rem;
        }
        
        /* ============================================
           DASHBOARD QUICK ACTIONS
        ============================================ */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .quick-action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            background: var(--dark-gray);
            border-radius: var(--radius);
            border: 1px solid var(--gray);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .quick-action-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            background: rgba(79, 70, 229, 0.1);
        }
        
        .quick-action-btn i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        /* ============================================
           LOADING SPINNER
        ============================================ */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
            margin: 2rem auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .post-form {
            display: none;
        }
        
        .post-form.active {
            display: block;
        }
        
        .content-tab {
            display: none;
        }
        
        .dashboard-tab {
            display: none;
        }
        
        .dashboard-tab:first-child {
            display: block;
        }

        /* ============================================
           SHOP STYLES
        ============================================ */
        .shop-header {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--dark-gray);
            border-radius: var(--radius-xl);
            border: 2px solid var(--primary);
        }
        
        .shop-avatar-lg {
            width: 120px;
            height: 120px;
            border-radius: var(--radius-xl);
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 3rem;
            font-weight: 600;
            border: 3px solid var(--secondary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .shop-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .shop-stat {
            text-align: center;
            padding: 1rem;
            background: var(--dark);
            border-radius: var(--radius);
            border: 1px solid var(--gray);
        }
        
        .shop-stat-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--secondary);
            display: block;
        }
        
        .shop-stat-label {
            font-size: 0.875rem;
            color: var(--light-gray);
            margin-top: 0.25rem;
        }

        /* ============================================
           CV UPLOAD STYLES
        ============================================ */
        .cv-preview {
            width: 100%;
            height: 300px;
            border-radius: var(--radius);
            overflow: hidden;
            border: 2px solid var(--gray);
            background: var(--dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        
        .cv-preview i {
            font-size: 4rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .cv-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .cv-item {
            background: var(--dark-gray);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--gray);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .cv-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .cv-item-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .cv-item-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--secondary);
            font-size: 1.5rem;
        }

        /* ============================================
           SHOP PRODUCTS GRID
        ============================================ */
        .shop-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-container">
                <a href="#" class="logo" onclick="showPage('home'); return false;">
                    <div class="logo-icon">S+</div>
                    <div class="logo-text">
                        SOKO<span>PLUS</span>
                        <span class="logo-tagline">Marketplace & Business Hub</span>
                    </div>
                </a>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <nav class="nav-menu" id="navMenu">
                    <div class="nav-links" id="navLinks">
                        <!-- Navigation loaded by JavaScript -->
                    </div>
                    
                    <div class="user-section" id="userSection">
                        <!-- User section loaded by JavaScript -->
                    </div>
                </nav>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="main-container">
        <!-- Home Page - ENHANCED -->
        <section id="home" class="page active">
            <div class="container">
                <!-- Enhanced Hero Section -->
                <div class="hero-section">
                    <div class="hero-content">
                        <div class="hero-text">
                            <h1 class="hero-title">
                                <span class="gradient-text">Sell, Connect & Grow</span>
                                <br>with SOKOPLUS Marketplace
                            </h1>
                            <p class="hero-subtitle">
                                Kenyans all-in-one platform for businesses & individuals. 
                                Post products, jobs, services & social updates. 
                                <span class="highlight">Earn 50% commission</span> on referrals!
                            </p>
                            
                            <div class="hero-cta" id="heroActions">
                                <!-- Buttons loaded by JavaScript -->
                            </div>
                            
                            <div class="hero-stats-container">
                                <div class="stat-card pulse-animation">
                                    <div class="stat-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="totalUsers">0</span>
                                        <span class="stat-label">Active Users</span>
                                    </div>
                                </div>
                                
                                <div class="stat-card pulse-animation" style="animation-delay: 0.2s">
                                    <div class="stat-icon">
                                        <i class="fas fa-box"></i>
                                    </div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="totalPosts">0</span>
                                        <span class="stat-label">Live Posts</span>
                                    </div>
                                </div>
                                
                                <div class="stat-card pulse-animation" style="animation-delay: 0.4s">
                                    <div class="stat-icon">
                                        <i class="fas fa-money-bill-wave"></i>
                                    </div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="totalEarnings">KES 0</span>
                                        <span class="stat-label">Paid Out</span>
                                    </div>
                                </div>
                                
                                <div class="stat-card pulse-animation" style="animation-delay: 0.6s">
                                    <div class="stat-icon">
                                        <i class="fas fa-rocket"></i>
                                    </div>
                                    <div class="stat-data">
                                        <span class="stat-number" id="activeTransactions">0</span>
                                        <span class="stat-label">Today</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="hero-features">
                                <div class="feature-tag">
                                    <i class="fas fa-check-circle"></i> Free Posts with Subscription
                                </div>
                                <div class="feature-tag">
                                    <i class="fas fa-check-circle"></i> 50% Referral Commission
                                </div>
                                <div class="feature-tag">
                                    <i class="fas fa-check-circle"></i> Business Analytics
                                </div>
                                <div class="feature-tag">
                                    <i class="fas fa-check-circle"></i> M-Pesa Withdrawals
                                </div>
                            </div>
                        </div>
                        
                        <div class="hero-visual">
                            <div class="floating-card card-1">
                                <div class="card-content">
                                    <div class="card-icon">
                                        <i class="fas fa-shopping-cart"></i>
                                    </div>
                                    <h4>Product Sales</h4>
                                    <p>KES 85,000</p>
                                </div>
                            </div>
                            
                            <div class="floating-card card-2">
                                <div class="card-content">
                                    <div class="card-icon">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <h4>Job Posted</h4>
                                    <p>Remote Developer</p>
                                </div>
                            </div>
                            
                            <div class="floating-card card-3">
                                <div class="card-content">
                                    <div class="card-icon">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <h4>Earnings</h4>
                                    <p>KES 25,000+</p>
                                </div>
                            </div>
                            
                            <div class="hero-illustration">
                                <div class="illustration-container">
                                    <div class="phone-mockup">
                                        <div class="phone-screen">
                                            <div class="app-header">
                                                <span>SOKOPLUS</span>
                                            </div>
                                            <div class="app-content">
                                                <div class="app-item">
                                                    <i class="fas fa-box"></i>
                                                    <span>Products</span>
                                                </div>
                                                <div class="app-item active">
                                                    <i class="fas fa-users"></i>
                                                    <span>Social</span>
                                                </div>
                                                <div class="app-item">
                                                    <i class="fas fa-briefcase"></i>
                                                    <span>Jobs</span>
                                                </div>
                                                <div class="app-item">
                                                    <i class="fas fa-concierge-bell"></i>
                                                    <span>Services</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scroll-indicator" onclick="document.querySelector('.trending-section').scrollIntoView({ behavior: 'smooth' })">
                        <span>Explore Marketplace</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                
                <!-- Trending Categories -->
                <div class="trending-section">
                    <div class="section-header">
                        <h2 class="section-title">Trending Categories</h2>
                        <a href="#" onclick="showPage('marketplace'); return false;" style="color: var(--primary-light); text-decoration: none; font-weight: 600;">
                            View All <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                    <div class="trending-grid">
                        <div class="trending-item" onclick="filterMarketplace('electronics')">
                            <div class="trending-icon blue">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div>
                                <h4 style="color: var(--white);">Electronics</h4>
                                <p style="color: var(--light-gray); font-size: 0.875rem;">Phones, Laptops, Gadgets</p>
                            </div>
                        </div>
                        
                        <div class="trending-item" onclick="filterMarketplace('fashion')">
                            <div class="trending-icon purple">
                                <i class="fas fa-tshirt"></i>
                            </div>
                            <div>
                                <h4 style="color: var(--white);">Fashion</h4>
                                <p style="color: var(--light-gray); font-size: 0.875rem;">Clothes, Shoes, Accessories</p>
                            </div>
                        </div>
                        
                        <div class="trending-item" onclick="filterMarketplace('vehicles')">
                            <div class="trending-icon yellow">
                                <i class="fas fa-car"></i>
                            </div>
                            <div>
                                <h4 style="color: var(--white);">Vehicles</h4>
                                <p style="color: var(--light-gray); font-size: 0.875rem;">Cars, Bikes, Parts</p>
                            </div>
                        </div>
                        
                        <div class="trending-item" onclick="filterMarketplace('real-estate')">
                            <div class="trending-icon blue">
                                <i class="fas fa-home"></i>
                            </div>
                            <div>
                                <h4 style="color: var(--white);">Real Estate</h4>
                                <p style="color: var(--light-gray); font-size: 0.875rem;">Houses, Plots, Rentals</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- How It Works -->
                <div class="mb-3">
                    <div class="section-header">
                        <h2 class="section-title">How SOKOPLUS Works</h2>
                    </div>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon primary">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <h3>Subscribe (KES 50)</h3>
                            <p>Weekly subscription gives you unlimited free posts. Admin approval required after payment. Verified badge included.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon secondary">
                                <i class="fas fa-upload"></i>
                            </div>
                            <h3>Post for Free</h3>
                            <p>Upload products, jobs, or social posts with images/videos. No additional fees for subscribers. Schedule posts feature.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon accent">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <h3>Boost Posts (KES 100)</h3>
                            <p>Pay KES 100 to boost your posts for maximum visibility. Featured in premium section for 7 days.</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon primary">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Business Analytics</h3>
                            <p>Track post performance, views, and engagement. Get insights to optimize your listings and reach.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Business Tools Section -->
                <div class="business-tools-section">
                    <div class="section-header">
                        <h2 class="section-title">Business Tools</h2>
                        <p style="color: var(--light-gray); max-width: 500px;">Advanced tools to help you grow your business and maximize earnings</p>
                    </div>
                    <div class="tools-grid">
                        <div class="tool-card" onclick="showPage('dashboard')">
                            <div class="tool-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <h3>Analytics Dashboard</h3>
                            <p>Track post performance, views, and engagement metrics</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('bulkUpload')">
                            <div class="tool-icon">
                                <i class="fas fa-file-upload"></i>
                            </div>
                            <h3>Bulk Upload</h3>
                            <p>Upload multiple products at once with CSV/Excel</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('inventory')">
                            <div class="tool-icon">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <h3>Inventory Management</h3>
                            <p>Track stock levels and receive low stock alerts</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('scheduler')">
                            <div class="tool-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Post Scheduler</h3>
                            <p>Schedule posts for optimal times automatically</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('marketing')">
                            <div class="tool-icon">
                                <i class="fas fa-bullhorn"></i>
                            </div>
                            <h3>Marketing Tools</h3>
                            <p>Create campaigns and track conversion rates</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('reports')">
                            <div class="tool-icon">
                                <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                            <h3>Sales Reports</h3>
                            <p>Generate detailed sales and earnings reports</p>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonials -->
                <div class="testimonials-section">
                    <div class="section-header">
                        <h2 class="section-title">Success Stories</h2>
                    </div>
                    <div class="testimonials-slider">
                        <div class="testimonial-card">
                            <div class="testimonial-content">
                                <p>"SOKOPLUS helped me grow my clothing business by 300% in 3 months. The referral program alone earned me KES 25,000!"</p>
                            </div>
                            <div class="testimonial-author">
                                <div class="user-avatar-sm">S</div>
                                <div>
                                    <h4 style="color: var(--white);">Sarah Wanjiru</h4>
                                    <p style="color: var(--light-gray); font-size: 0.875rem;">Fashion Entrepreneur</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="testimonial-card">
                            <div class="testimonial-content">
                                <p>"As a freelance developer, I found 5 clients through SOKOPLUS in one week. The platform is a game-changer!"</p>
                            </div>
                            <div class="testimonial-author">
                                <div class="user-avatar-sm">J</div>
                                <div>
                                    <h4 style="color: var(--white);">John Maina</h4>
                                    <p style="color: var(--light-gray); font-size: 0.875rem;">Software Developer</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="testimonial-card">
                            <div class="testimonial-content">
                                <p>"The business tools helped me manage my inventory and boost sales. The analytics dashboard is incredibly useful."</p>
                            </div>
                            <div class="testimonial-author">
                                <div class="user-avatar-sm">M</div>
                                <div>
                                    <h4 style="color: var(--white);">Mary Atieno</h4>
                                    <p style="color: var(--light-gray); font-size: 0.875rem;">Electronics Retailer</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Content Tabs -->
                <div class="content-tabs" id="homeContentTabs">
                    <button class="tab-btn active" onclick="showHomeTab('featured')">
                        <i class="fas fa-star"></i> Featured
                    </button>
                    <button class="tab-btn" onclick="showHomeTab('products')">
                        <i class="fas fa-box"></i> Products
                    </button>
                    <button class="tab-btn" onclick="showHomeTab('social')">
                        <i class="fas fa-users"></i> Social
                    </button>
                    <button class="tab-btn" onclick="showHomeTab('jobs')">
                        <i class="fas fa-briefcase"></i> Jobs
                    </button>
                    <button class="tab-btn" onclick="showHomeTab('boosted')">
                        <i class="fas fa-rocket"></i> Boosted
                    </button>
                </div>
                
                <!-- Content Areas -->
                <div id="featuredTab" class="content-tab">
                    <div class="content-grid grid-3" id="featuredContent">
                        <!-- Featured content loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="productsTab" class="content-tab" style="display: none;">
                    <div class="content-grid grid-3" id="featuredProducts">
                        <!-- Products loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="socialTab" class="content-tab" style="display: none;">
                    <div class="content-grid grid-2" id="featuredSocial">
                        <!-- Social posts loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="jobsTab" class="content-tab" style="display: none;">
                    <div class="content-grid grid-3" id="featuredJobs">
                        <!-- Jobs loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="boostedTab" class="content-tab" style="display: none;">
                    <div class="content-grid grid-3" id="featuredBoosted">
                        <!-- Boosted content loaded by JavaScript -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Marketplace -->
        <section id="marketplace" class="page">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Marketplace</h2>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <input type="text" id="marketplaceSearch" class="form-control" placeholder="Search posts..." style="min-width: 200px;">
                        <select id="marketplaceCategory" class="form-control">
                            <option value="">All Categories</option>
                            <option value="electronics">Electronics</option>
                            <option value="fashion">Fashion</option>
                            <option value="vehicles">Vehicles</option>
                            <option value="real-estate">Real Estate</option>
                            <option value="home">Home & Garden</option>
                            <option value="services">Services</option>
                            <option value="social">Social Posts</option>
                            <option value="jobs">Jobs</option>
                        </select>
                        <select id="marketplaceSort" class="form-control">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="boosted">Boosted First</option>
                            <option value="popular">Most Viewed</option>
                        </select>
                        <button class="btn btn-primary" onclick="loadMarketplace()">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                
                <div class="content-grid grid-3" id="marketplaceContent">
                    <!-- Marketplace content loaded by JavaScript -->
                </div>
                
                <div id="marketplacePagination" style="display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem;"></div>
            </div>
        </section>
        
        <!-- Create Post -->
        <section id="create-post" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Create New Post</h2>
                        <p class="text-center mb-3" style="color: var(--light-gray);">Free posting for subscribed users</p>
                        
                        <!-- Post Type Tabs -->
                        <div class="post-creation-tabs">
                            <div class="post-tab active" onclick="showPostForm('product')">
                                <i class="fas fa-box"></i>
                                <span>Product</span>
                            </div>
                            <div class="post-tab" onclick="showPostForm('social')">
                                <i class="fas fa-users"></i>
                                <span>Social Post</span>
                            </div>
                            <div class="post-tab" onclick="showPostForm('job')">
                                <i class="fas fa-briefcase"></i>
                                <span>Job Listing</span>
                            </div>
                            <div class="post-tab" onclick="showPostForm('service')">
                                <i class="fas fa-concierge-bell"></i>
                                <span>Service</span>
                            </div>
                            <div class="post-tab" onclick="showPostForm('cv')">
                                <i class="fas fa-file-alt"></i>
                                <span>Upload CV</span>
                            </div>
                        </div>
                        
                        <!-- Product Form -->
                        <form id="productForm" class="post-form active">
                            <div class="form-group">
                                <label class="form-label">Product Title *</label>
                                <input type="text" class="form-control" id="productTitle" placeholder="e.g., iPhone 13 Pro Max 256GB" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Description *</label>
                                <textarea class="form-control form-textarea" id="productDescription" placeholder="Describe your product in detail..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Product Images/Videos</label>
                                <div class="upload-area" onclick="document.getElementById('productMedia').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload images/videos</p>
                                    <small style="color: var(--light-gray);">Max 10 files, 10MB each</small>
                                </div>
                                <input type="file" id="productMedia" accept="image/*,video/*" multiple style="display: none;" onchange="previewMedia('productMedia', 'productMediaPreview')">
                                <div id="productMediaPreview" class="media-preview-container"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Price (KES) *</label>
                                <input type="number" class="form-control" id="productPrice" placeholder="e.g., 85000" min="1" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Category *</label>
                                <select class="form-control" id="productCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="fashion">Fashion</option>
                                    <option value="home">Home & Garden</option>
                                    <option value="vehicles">Vehicles</option>
                                    <option value="real-estate">Real Estate</option>
                                    <option value="services">Services</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location *</label>
                                <input type="text" class="form-control" id="productLocation" placeholder="e.g., Nairobi, Mombasa" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Contact WhatsApp *</label>
                                <input type="text" class="form-control" id="productWhatsapp" placeholder="2547XXXXXXXX" pattern="^2547\d{8}$" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <input type="checkbox" id="boostProduct" style="margin-right: 0.5rem;">
                                    Boost this post for KES 100 (Increased visibility)
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Schedule Post (Optional)</label>
                                <input type="datetime-local" class="form-control" id="productSchedule">
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full btn-lg">
                                <i class="fas fa-plus-circle"></i> Post Product
                            </button>
                        </form>
                        
                        <!-- Social Post Form -->
                        <form id="socialForm" class="post-form">
                            <div class="form-group">
                                <label class="form-label">What's on your mind? *</label>
                                <textarea class="form-control form-textarea" id="socialContent" placeholder="Share your thoughts, updates, or announcements..." rows="6" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Add Images/Videos</label>
                                <div class="upload-area" onclick="document.getElementById('socialMedia').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload images/videos</p>
                                    <small style="color: var(--light-gray);">Max 10 files, 10MB each</small>
                                </div>
                                <input type="file" id="socialMedia" accept="image/*,video/*" multiple style="display: none;" onchange="previewMedia('socialMedia', 'socialMediaPreview')">
                                <div id="socialMediaPreview" class="media-preview-container"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Post Type</label>
                                <select class="form-control" id="socialType">
                                    <option value="general">General</option>
                                    <option value="announcement">Announcement</option>
                                    <option value="promotion">Promotion</option>
                                    <option value="question">Question</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <input type="checkbox" id="boostSocial" style="margin-right: 0.5rem;">
                                    Boost this post for KES 100 (Reach more people)
                                </label>
                            </div>
                            
                            <button type="submit" class="btn btn-secondary w-full btn-lg">
                                <i class="fas fa-share"></i> Share Post
                            </button>
                        </form>
                        
                        <!-- Job Form -->
                        <form id="jobForm" class="post-form">
                            <div class="form-group">
                                <label class="form-label">Job Title *</label>
                                <input type="text" class="form-control" id="jobTitle" placeholder="e.g., Software Developer, Sales Manager" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Company/Organization *</label>
                                <input type="text" class="form-control" id="jobCompany" placeholder="Your company name" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Job Description *</label>
                                <textarea class="form-control form-textarea" id="jobDescription" placeholder="Describe the job responsibilities, requirements..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Job Type *</label>
                                <select class="form-control" id="jobType" required>
                                    <option value="">Select Type</option>
                                    <option value="full-time">Full Time</option>
                                    <option value="part-time">Part Time</option>
                                    <option value="contract">Contract</option>
                                    <option value="internship">Internship</option>
                                    <option value="remote">Remote</option>
                                    <option value="hybrid">Hybrid</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Salary Range (KES) *</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <input type="number" class="form-control" id="jobSalaryMin" placeholder="Minimum" required>
                                    <input type="number" class="form-control" id="jobSalaryMax" placeholder="Maximum" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location *</label>
                                <input type="text" class="form-control" id="jobLocation" placeholder="e.g., Nairobi, Remote, Hybrid" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Contact WhatsApp *</label>
                                <input type="text" class="form-control" id="jobWhatsapp" placeholder="2547XXXXXXXX" pattern="^2547\d{8}$" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Application Email/URL *</label>
                                <input type="text" class="form-control" id="jobApply" placeholder="Email or application link" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Company Images/Videos (Optional)</label>
                                <div class="upload-area" onclick="document.getElementById('jobMedia').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload company/office images</p>
                                    <small style="color: var(--light-gray);">Max 5 files, 10MB each</small>
                                </div>
                                <input type="file" id="jobMedia" accept="image/*,video/*" multiple style="display: none;" onchange="previewMedia('jobMedia', 'jobMediaPreview')">
                                <div id="jobMediaPreview" class="media-preview-container"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <input type="checkbox" id="boostJob" style="margin-right: 0.5rem;">
                                    Boost this job post for KES 100 (Get more applicants)
                                </label>
                            </div>
                            
                            <button type="submit" class="btn btn-accent w-full btn-lg">
                                <i class="fas fa-briefcase"></i> Post Job
                            </button>
                        </form>
                        
                        <!-- Service Form -->
                        <form id="serviceForm" class="post-form">
                            <div class="form-group">
                                <label class="form-label">Service Title *</label>
                                <input type="text" class="form-control" id="serviceTitle" placeholder="e.g., Web Development, Plumbing, Photography" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Service Description *</label>
                                <textarea class="form-control form-textarea" id="serviceDescription" placeholder="Describe your service in detail..." required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Service Category *</label>
                                <select class="form-control" id="serviceCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="it">IT & Tech</option>
                                    <option value="creative">Creative</option>
                                    <option value="professional">Professional</option>
                                    <option value="home">Home Services</option>
                                    <option value="health">Health & Wellness</option>
                                    <option value="education">Education</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Price Range (KES) *</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <input type="number" class="form-control" id="servicePriceMin" placeholder="Minimum" required>
                                    <input type="number" class="form-control" id="servicePriceMax" placeholder="Maximum" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location *</label>
                                <input type="text" class="form-control" id="serviceLocation" placeholder="e.g., Nairobi, Remote, On-site" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Contact WhatsApp *</label>
                                <input type="text" class="form-control" id="serviceWhatsapp" placeholder="2547XXXXXXXX" pattern="^2547\d{8}$" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Portfolio Images/Videos</label>
                                <div class="upload-area" onclick="document.getElementById('serviceMedia').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Upload portfolio/work samples</p>
                                    <small style="color: var(--light-gray);">Max 8 files, 10MB each</small>
                                </div>
                                <input type="file" id="serviceMedia" accept="image/*,video/*" multiple style="display: none;" onchange="previewMedia('serviceMedia', 'serviceMediaPreview')">
                                <div id="serviceMediaPreview" class="media-preview-container"></div>
                            </div>
                            
                            <button type="submit" class="btn btn-business w-full btn-lg">
                                <i class="fas fa-concierge-bell"></i> List Service
                            </button>
                        </form>
                        
                        <!-- CV Form -->
                        <form id="cvForm" class="post-form">
                            <div class="form-group">
                                <label class="form-label">CV Title *</label>
                                <input type="text" class="form-control" id="cvTitle" placeholder="e.g., Senior Software Developer CV" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Professional Summary</label>
                                <textarea class="form-control form-textarea" id="cvSummary" placeholder="Briefly describe your skills, experience, and career goals..." rows="4"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">CV File *</label>
                                <div class="upload-area" onclick="document.getElementById('cvFile').click()">
                                    <i class="fas fa-file-pdf"></i>
                                    <p>Click to upload CV (PDF/DOC/DOCX)</p>
                                    <small style="color: var(--light-gray);">Max 5MB, PDF, DOC, DOCX formats</small>
                                </div>
                                <input type="file" id="cvFile" accept=".pdf,.doc,.docx" style="display: none;" onchange="previewCV()">
                                <div id="cvPreview" class="cv-preview mt-2">
                                    <i class="fas fa-file-alt"></i>
                                    <p>CV Preview will appear here</p>
                                    <small style="color: var(--light-gray);">Upload your CV to see preview</small>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Skills (comma separated)</label>
                                <input type="text" class="form-control" id="cvSkills" placeholder="e.g., JavaScript, React, Node.js, Python">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Experience Level</label>
                                <select class="form-control" id="cvExperience">
                                    <option value="">Select Level</option>
                                    <option value="entry">Entry Level (0-2 years)</option>
                                    <option value="mid">Mid Level (2-5 years)</option>
                                    <option value="senior">Senior (5+ years)</option>
                                    <option value="executive">Executive</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Expected Salary (KES)</label>
                                <input type="number" class="form-control" id="cvSalary" placeholder="e.g., 150000">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control" id="cvLocation" placeholder="e.g., Nairobi, Remote">
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full btn-lg">
                                <i class="fas fa-upload"></i> Upload CV
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Dashboard - ENHANCED -->
        <section id="dashboard" class="page">
            <div class="container">
                <!-- Dashboard Header -->
                <div class="profile-header">
                    <div class="profile-avatar-lg" id="profileAvatar">
                        <!-- Avatar loaded by JavaScript -->
                    </div>
                    <div class="profile-info">
                        <h3 id="profileName"></h3>
                        <p id="profileEmail"></p>
                        <p id="profilePhone"></p>
                        <div id="profileStatus"></div>
                        <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                            <button class="btn btn-sm btn-outline" onclick="showPage('profile')">
                                <i class="fas fa-user-edit"></i> Edit Profile
                            </button>
                            <button class="btn btn-sm btn-business" onclick="showBusinessModal('upgrade')">
                                <i class="fas fa-crown"></i> Upgrade
                            </button>
                            <button class="btn btn-sm btn-accent" onclick="showPage('shop')">
                                <i class="fas fa-store"></i> My Shop
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="quick-actions">
                    <div class="quick-action-btn" onclick="showPage('create-post')">
                        <i class="fas fa-plus-circle"></i>
                        <span>Create Post</span>
                    </div>
                    <div class="quick-action-btn" onclick="showPage('marketplace')">
                        <i class="fas fa-store"></i>
                        <span>Browse Marketplace</span>
                    </div>
                    <div class="quick-action-btn" onclick="showBusinessModal('analytics')">
                        <i class="fas fa-chart-bar"></i>
                        <span>View Analytics</span>
                    </div>
                    <div class="quick-action-btn" onclick="copyReferralLink()">
                        <i class="fas fa-share-alt"></i>
                        <span>Share Referral</span>
                    </div>
                    <div class="quick-action-btn" onclick="showPage('my-cvs')">
                        <i class="fas fa-file-alt"></i>
                        <span>My CVs</span>
                    </div>
                    <div class="quick-action-btn" onclick="showPage('shop')">
                        <i class="fas fa-store-alt"></i>
                        <span>My Shop</span>
                    </div>
                </div>
                
                <!-- Quick Stats -->
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(79, 70, 229, 0.2); color: var(--primary-light); border: 1px solid rgba(99, 102, 241, 0.3);">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="myProductsCount">0</div>
                            <div>Active Products</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.2); color: var(--secondary); border: 1px solid rgba(245, 158, 11, 0.3);">
                            <i class="fas fa-eye"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalViews">0</div>
                            <div>Total Views</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--accent); border: 1px solid rgba(139, 92, 246, 0.3);">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="myJobsCount">0</div>
                            <div>Job Listings</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.3);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="myEarnings">KES 0</div>
                            <div>Available Balance</div>
                        </div>
                    </div>
                </div>
                
                <!-- Business Tools Section -->
                <div class="business-tools-section">
                    <div class="section-header">
                        <h2 class="section-title">Business Tools</h2>
                        <p style="color: var(--light-gray);">Advanced tools to manage and grow your business</p>
                    </div>
                    <div class="tools-grid">
                        <div class="tool-card" onclick="showBusinessModal('analytics')">
                            <div class="tool-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Advanced Analytics</h3>
                            <p>Detailed insights on post performance and customer engagement</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('inventory')">
                            <div class="tool-icon">
                                <i class="fas fa-warehouse"></i>
                            </div>
                            <h3>Inventory Manager</h3>
                            <p>Track stock levels, set alerts, and manage suppliers</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('bulkUpload')">
                            <div class="tool-icon">
                                <i class="fas fa-file-csv"></i>
                            </div>
                            <h3>Bulk CSV Upload</h3>
                            <p>Upload multiple products/services via CSV file</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('reports')">
                            <div class="tool-icon">
                                <i class="fas fa-file-pdf"></i>
                            </div>
                            <h3>PDF Reports</h3>
                            <p>Generate detailed sales and performance reports</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('scheduler')">
                            <div class="tool-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3>Content Scheduler</h3>
                            <p>Schedule posts for optimal times automatically</p>
                        </div>
                        
                        <div class="tool-card" onclick="showBusinessModal('marketing')">
                            <div class="tool-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <h3>Marketing Campaigns</h3>
                            <p>Create and track marketing campaigns</p>
                        </div>
                    </div>
                </div>
                
                <!-- Earnings & Referrals Section -->
                <div class="earnings-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h3 style="color: var(--secondary); margin-bottom: 0.5rem;">Earnings & Referrals</h3>
                            <p style="opacity: 0.9;">Earn 50% commission on every successful referral</p>
                        </div>
                        <span class="badge badge-secondary">50% Commission</span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; color: white;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--secondary);">KES 25</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">Per Referral</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--secondary);" id="totalReferrals">0</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">Successful Referrals</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--secondary);" id="earnedAmount">KES 0</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">Total Earned</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--secondary);" id="withdrawnAmount">KES 0</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">Withdrawn</div>
                        </div>
                    </div>
                    
                    <!-- Referral Link -->
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                        <label style="color: white; margin-bottom: 0.5rem; display: block;">Your Referral Link</label>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" class="form-control" id="referralLink" readonly 
                                   style="background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); color: white;">
                            <button class="btn btn-secondary" onclick="copyReferralLink()">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                            <button class="btn btn-outline" onclick="shareReferralLink()">
                                <i class="fas fa-share-alt"></i> Share
                            </button>
                        </div>
                        <small style="color: rgba(255, 255, 255, 0.7); margin-top: 0.5rem; display: block;">
                            Share this link. Earn KES 25 when friends subscribe.
                        </small>
                    </div>
                    
                    <!-- Withdrawal Form -->
                    <div>
                        <h4 style="color: white; margin-bottom: 1rem;">Withdraw Earnings</h4>
                        <form id="withdrawalForm">
                            <div class="form-group">
                                <input type="number" class="form-control" id="withdrawalAmount" 
                                       placeholder="Amount (KES)" min="100" 
                                       style="background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); color: white;">
                                <small style="color: rgba(255, 255, 255, 0.7);">Minimum: KES 100 (10% fee applies)</small>
                            </div>
                            
                            <div class="form-group">
                                <input type="text" class="form-control" id="withdrawalMpesa" 
                                       placeholder="M-Pesa Number (2547XXXXXXXX)" 
                                       style="background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); color: white;">
                            </div>
                            
                            <button type="submit" class="btn btn-secondary w-full">
                                <i class="fas fa-paper-plane"></i> Request Withdrawal
                            </button>
                        </form>
                    </div>
                </div>
                
                <!-- My Posts Tabs -->
                <div class="content-tabs">
                    <button class="tab-btn active" onclick="showDashboardTab('myProducts')">
                        <i class="fas fa-box"></i> My Products
                    </button>
                    <button class="tab-btn" onclick="showDashboardTab('myServices')">
                        <i class="fas fa-concierge-bell"></i> My Services
                    </button>
                    <button class="tab-btn" onclick="showDashboardTab('mySocial')">
                        <i class="fas fa-users"></i> Social Posts
                    </button>
                    <button class="tab-btn" onclick="showDashboardTab('myJobs')">
                        <i class="fas fa-briefcase"></i> My Jobs
                    </button>
                    <button class="tab-btn" onclick="showDashboardTab('myBoosted')">
                        <i class="fas fa-rocket"></i> Boosted
                    </button>
                    <button class="tab-btn" onclick="showDashboardTab('drafts')">
                        <i class="fas fa-file-alt"></i> Drafts
                    </button>
                </div>
                
                <!-- Content Areas -->
                <div id="myProductsTab" class="dashboard-tab">
                    <div class="content-grid grid-3" id="myProductsGrid">
                        <!-- User's products loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="myServicesTab" class="dashboard-tab" style="display: none;">
                    <div class="content-grid grid-3" id="myServicesGrid">
                        <!-- User's services loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="mySocialTab" class="dashboard-tab" style="display: none;">
                    <div class="content-grid grid-2" id="mySocialGrid">
                        <!-- User's social posts loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="myJobsTab" class="dashboard-tab" style="display: none;">
                    <div class="content-grid grid-3" id="myJobsGrid">
                        <!-- User's jobs loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="myBoostedTab" class="dashboard-tab" style="display: none;">
                    <div class="content-grid grid-3" id="myBoostedGrid">
                        <!-- User's boosted posts loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="draftsTab" class="dashboard-tab" style="display: none;">
                    <div class="content-grid grid-3" id="draftsGrid">
                        <!-- User's drafts loaded by JavaScript -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Shop Page -->
        <section id="shop" class="page">
            <div class="container">
                <div class="shop-header" id="shopHeader">
                    <!-- Shop header loaded by JavaScript -->
                </div>
                
                <!-- Shop Management Tabs -->
                <div class="content-tabs">
                    <button class="tab-btn active" onclick="showShopTab('products')">
                        <i class="fas fa-box"></i> Shop Products
                    </button>
                    <button class="tab-btn" onclick="showShopTab('services')">
                        <i class="fas fa-concierge-bell"></i> Shop Services
                    </button>
                    <button class="tab-btn" onclick="showShopTab('orders')">
                        <i class="fas fa-shopping-cart"></i> Orders
                    </button>
                    <button class="tab-btn" onclick="showShopTab('customers')">
                        <i class="fas fa-users"></i> Customers
                    </button>
                    <button class="tab-btn" onclick="showShopTab('settings')">
                        <i class="fas fa-cog"></i> Shop Settings
                    </button>
                </div>
                
                <!-- Shop Content -->
                <div id="shopProductsTab" class="dashboard-tab">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Shop Products</h3>
                        <button class="btn btn-primary" onclick="showPage('create-post')">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                    </div>
                    <div class="shop-products-grid" id="shopProductsGrid">
                        <!-- Shop products loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="shopServicesTab" class="dashboard-tab" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                        <h3>Shop Services</h3>
                        <button class="btn btn-primary" onclick="showPage('create-post')">
                            <i class="fas fa-plus"></i> Add Service
                        </button>
                    </div>
                    <div class="shop-products-grid" id="shopServicesGrid">
                        <!-- Shop services loaded by JavaScript -->
                    </div>
                </div>
                
                <div id="shopOrdersTab" class="dashboard-tab" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart"></i>
                        <h3 style="color: var(--white);">No Orders Yet</h3>
                        <p>When customers purchase your products/services, orders will appear here</p>
                    </div>
                </div>
                
                <div id="shopCustomersTab" class="dashboard-tab" style="display: none;">
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3 style="color: var(--white);">No Customers Yet</h3>
                        <p>Customer information will appear here when they purchase from your shop</p>
                    </div>
                </div>
                
                <div id="shopSettingsTab" class="dashboard-tab" style="display: none;">
                    <div class="form-card">
                        <h3 class="form-title">Shop Settings</h3>
                        <form id="shopSettingsForm">
                            <div class="form-group">
                                <label class="form-label">Shop Name *</label>
                                <input type="text" class="form-control" id="shopName" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shop Description</label>
                                <textarea class="form-control form-textarea" id="shopDescription" placeholder="Describe your shop..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shop Category</label>
                                <select class="form-control" id="shopCategory">
                                    <option value="">Select Category</option>
                                    <option value="electronics">Electronics</option>
                                    <option value="fashion">Fashion</option>
                                    <option value="home">Home & Garden</option>
                                    <option value="services">Services</option>
                                    <option value="food">Food & Drinks</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shop Logo</label>
                                <div class="upload-area" onclick="document.getElementById('shopLogo').click()">
                                    <i class="fas fa-camera"></i>
                                    <p>Click to upload shop logo</p>
                                    <small style="color: var(--light-gray);">Max 5MB, JPG/PNG</small>
                                </div>
                                <input type="file" id="shopLogo" accept="image/*" style="display: none;" onchange="previewShopLogo()">
                                <div id="shopLogoPreview" class="mt-2" style="text-align: center;"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shop Banner</label>
                                <div class="upload-area" onclick="document.getElementById('shopBanner').click()">
                                    <i class="fas fa-image"></i>
                                    <p>Click to upload shop banner</p>
                                    <small style="color: var(--light-gray);">Max 10MB, JPG/PNG</small>
                                </div>
                                <input type="file" id="shopBanner" accept="image/*" style="display: none;" onchange="previewShopBanner()">
                                <div id="shopBannerPreview" class="mt-2" style="text-align: center;"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Contact WhatsApp *</label>
                                <input type="text" class="form-control" id="shopWhatsapp" placeholder="2547XXXXXXXX" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Shop Location</label>
                                <input type="text" class="form-control" id="shopLocation" placeholder="e.g., Nairobi, CBD">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Business Hours</label>
                                <input type="text" class="form-control" id="shopHours" placeholder="e.g., Mon-Fri 9AM-6PM, Sat 10AM-4PM">
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full">
                                <i class="fas fa-save"></i> Save Shop Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- CV Management Page -->
        <section id="my-cvs" class="page">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">My CVs</h2>
                    <button class="btn btn-primary" onclick="showPage('create-post')">
                        <i class="fas fa-plus"></i> Upload New CV
                    </button>
                </div>
                
                <div class="cv-list" id="cvList">
                    <!-- CVs loaded by JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Profile Page -->
        <section id="profile" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Edit Profile</h2>
                        <form id="profileForm">
                            <div class="form-group">
                                <label class="form-label">Profile Picture</label>
                                <div class="upload-area" onclick="document.getElementById('profilePicture').click()">
                                    <i class="fas fa-user-circle"></i>
                                    <p>Click to upload profile picture</p>
                                    <small style="color: var(--light-gray);">Max 5MB, JPG/PNG</small>
                                </div>
                                <input type="file" id="profilePicture" accept="image/*" style="display: none;" onchange="previewProfilePicture()">
                                <div id="profilePicturePreview" class="mt-2" style="text-align: center;"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Full Name *</label>
                                <input type="text" class="form-control" id="profileNameInput" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="profileEmailInput" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Phone Number *</label>
                                <input type="text" class="form-control" id="profilePhoneInput" placeholder="2547XXXXXXXX" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Location</label>
                                <input type="text" class="form-control" id="profileLocation" placeholder="Your city">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Bio</label>
                                <textarea class="form-control form-textarea" id="profileBio" placeholder="Tell us about yourself..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Business Name (Optional)</label>
                                <input type="text" class="form-control" id="profileBusiness" placeholder="Your business name">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Change Password</label>
                                <input type="password" class="form-control" id="profileCurrentPassword" placeholder="Current password">
                                <input type="password" class="form-control mt-2" id="profileNewPassword" placeholder="New password">
                                <input type="password" class="form-control mt-2" id="profileConfirmPassword" placeholder="Confirm new password">
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-full">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Admin Panel -->
        <section id="admin" class="page">
            <div class="container">
                <h2 class="section-title">Admin Panel</h2>
                
                <!-- Admin Stats -->
                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(79, 70, 229, 0.2); color: var(--primary-light); border: 1px solid rgba(99, 102, 241, 0.3);">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="adminUsers">0</div>
                            <div>Total Users</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.2); color: var(--secondary); border: 1px solid rgba(245, 158, 11, 0.3);">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="adminPosts">0</div>
                            <div>Total Posts</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(139, 92, 246, 0.2); color: var(--accent); border: 1px solid rgba(139, 92, 246, 0.3);">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="adminPending">0</div>
                            <div>Pending Approvals</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(16, 185, 129, 0.2); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.3);">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="adminRevenue">KES 0</div>
                            <div>Total Revenue</div>
                        </div>
                    </div>
                </div>
                
                <!-- Admin Tabs -->
                <div class="content-tabs">
                    <button class="tab-btn active" onclick="showAdminTab('pending')">
                        <i class="fas fa-clock"></i> Pending Approvals
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('withdrawals')">
                        <i class="fas fa-wallet"></i> Pending Withdrawals
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('users')">
                        <i class="fas fa-users"></i> All Users
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('posts')">
                        <i class="fas fa-list"></i> All Posts
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('analytics')">
                        <i class="fas fa-chart-line"></i> Analytics
                    </button>
                    <button class="tab-btn" onclick="showAdminTab('settings')">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
                
                <!-- Admin Content -->
                <div id="adminContent">
                    <!-- Content loaded by JavaScript -->
                </div>
            </div>
        </section>
        
        <!-- Register Page -->
        <section id="register" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Join SOKOPLUS</h2>
                        <form id="registerForm">
                            <!-- Form loaded by JavaScript -->
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Login Page -->
        <section id="login" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Welcome Back</h2>
                        <form id="loginForm">
                            <!-- Form loaded by JavaScript -->
                        </form>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Forgot Password -->
        <section id="forgot-password" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Reset Password</h2>
                        <div id="forgotPasswordForm">
                            <!-- Form loaded by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Subscription Page -->
        <section id="subscribe" class="page">
            <div class="container">
                <div class="form-container">
                    <div class="form-card">
                        <h2 class="form-title">Subscribe to SOKOPLUS</h2>
                        <p class="text-center mb-3" style="color: var(--light-gray);">KES 50/week for unlimited posts + business tools</p>
                        <div id="subscriptionForm">
                            <!-- Form loaded by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Chatbot -->
    <div class="chatbot-toggle" id="chatbotToggle">
        <i class="fas fa-comments"></i>
    </div>
    
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <div>
                <h4 style="margin: 0; color: var(--secondary);">SOKOPLUS Assistant</h4>
                <small style="opacity: 0.8; color: var(--light-gray);">Online 24/7</small>
            </div>
            <button class="chatbot-close" id="chatbotClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <!-- Messages loaded by JavaScript -->
        </div>
        <div class="quick-questions">
            <button class="quick-question" onclick="sendQuickQuestion('How do I post?')">How to post?</button>
            <button class="quick-question" onclick="sendQuickQuestion('Subscription cost?')">Subscription?</button>
            <button class="quick-question" onclick="sendQuickQuestion('Business tools?')">Business tools</button>
            <button class="quick-question" onclick="sendQuickQuestion('Contact admin')">Contact admin</button>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbotInput" placeholder="Type your question...">
            <button class="btn btn-primary" onclick="sendChatMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="logo" style="margin-bottom: 1rem;">
                        <div class="logo-icon" style="width: 40px; height: 40px; font-size: 1rem;">S+</div>
                        <div class="logo-text" style="font-size: 1.5rem;">
                            SOKO<span>PLUS</span>
                            <span class="logo-tagline">Marketplace & Business Hub</span>
                        </div>
                    </div>
                    <p style="color: var(--light-gray); font-size: 0.875rem;">
                        Kenyans fastest growing marketplace. Sell products, post jobs, share updates. Earn through referrals and business tools.
                    </p>
                </div>
                
                <div>
                    <h4 style="color: var(--secondary); margin-bottom: 1.5rem;">Quick Links</h4>
                    <ul style="list-style: none;">
                        <li><a href="#" onclick="showPage('home'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Home</a></li>
                        <li><a href="#" onclick="showPage('marketplace'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Marketplace</a></li>
                        <li><a href="#" onclick="showPage('create-post'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Create Post</a></li>
                        <li><a href="#" onclick="showPage('dashboard'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Dashboard</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 style="color: var(--secondary); margin-bottom: 1.5rem;">Business Tools</h4>
                    <ul style="list-style: none;">
                        <li><a href="#" onclick="showPage('dashboard'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Analytics</a></li>
                        <li><a href="#" onclick="showBusinessModal('inventory'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Inventory</a></li>
                        <li><a href="#" onclick="showBusinessModal('reports'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Reports</a></li>
                        <li><a href="#" onclick="showBusinessModal('marketing'); return false;" style="color: var(--light-gray); text-decoration: none; transition: var(--transition-fast); display: block; margin-bottom: 0.75rem;">Marketing</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 style="color: var(--secondary); margin-bottom: 1.5rem;">Payment Info</h4>
                    <ul style="list-style: none;">
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Paybill:</strong> 222111</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Account:</strong> 5414200</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Subscription:</strong> KES 50/week</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Boost:</strong> KES 100/post</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Upgrade:</strong> KES 200/month</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>WhatsApp Support:</strong> +254 712 883849</li>
                        <li style="color: var(--light-gray); margin-bottom: 0.75rem;"><strong>Email:</strong> sokoplus254@gmail.com</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                &copy; 2026 SOKOPLUS. All rights reserved. | WhatsApp Support: +254 712 883849 | Email: sokoplus254@gmail.com
            </div>
        </div>
    </footer>
    
    <!-- Modals -->
    <div class="modal" id="postModal">
        <div class="modal-content">
            <!-- Modal content loaded by JavaScript -->
        </div>
    </div>
    
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <!-- Payment modal loaded by JavaScript -->
        </div>
    </div>
    
    <div class="modal" id="businessModal">
        <div class="modal-content">
            <!-- Business tools modal loaded by JavaScript -->
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notificationContainer"></div>
    
    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="spinner" style="display: none;"></div>
    
    <script>
        // ============================================
        // SOKOPLUS LIVE APPLICATION - FRONTEND
        // ============================================
        
        const API_BASE_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:5000/api'
            : 'https://sokoplus-backend.vercel.app/api'; // Replace with your backend URL
        
        let currentUser = null;
        let authToken = null;
        
        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            initMobileNavigation();
            initEventListeners();
            initChatbot();
            checkAuth();
        });
        
        function initApp() {
            authToken = localStorage.getItem('sokoplus_token');
            const userData = localStorage.getItem('sokoplus_user');
            if (userData) {
                currentUser = JSON.parse(userData);
            }
            updateNavigation('home');
            loadHomeContent();
        }
        
        function initMobileNavigation() {
            const mobileBtn = document.getElementById('mobileMenuBtn');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileBtn) {
                mobileBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    mobileBtn.classList.toggle('active');
                    navMenu.classList.toggle('active');
                });
                
                document.addEventListener('click', (e) => {
                    if (!navMenu.contains(e.target) && !mobileBtn.contains(e.target)) {
                        mobileBtn.classList.remove('active');
                        navMenu.classList.remove('active');
                    }
                });
            }
        }
        
        function initEventListeners() {
            // Form submissions
            document.getElementById('productForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                createProductPost();
            });
            
            document.getElementById('socialForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                createSocialPost();
            });
            
            document.getElementById('jobForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                createJobPost();
            });
            
            document.getElementById('serviceForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                createServicePost();
            });
            
            document.getElementById('cvForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                uploadCV();
            });
            
            document.getElementById('withdrawalForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                requestWithdrawal();
            });
            
            document.getElementById('profileForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                updateProfile();
            });
            
            document.getElementById('shopSettingsForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                updateShopSettings();
            });
            
            // Chatbot
            document.getElementById('chatbotToggle')?.addEventListener('click', toggleChatbot);
            document.getElementById('chatbotClose')?.addEventListener('click', toggleChatbot);
            document.getElementById('chatbotInput')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendChatMessage();
            });
            
            // Marketplace filters
            document.getElementById('marketplaceSearch')?.addEventListener('input', loadMarketplace);
            document.getElementById('marketplaceCategory')?.addEventListener('change', loadMarketplace);
            document.getElementById('marketplaceSort')?.addEventListener('change', loadMarketplace);
            
            // Modal close buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    closeModal(e.target.id);
                }
            });
        }
        
        // ============================================
        // AUTHENTICATION FUNCTIONS
        // ============================================
        
        function checkAuth() {
            if (!authToken && !window.location.href.includes('register') && !window.location.href.includes('login')) {
                showPage('home');
            }
        }
        
        async function loginUser(email, password) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentUser = data.user;
                    authToken = data.token;
                    localStorage.setItem('sokoplus_token', authToken);
                    localStorage.setItem('sokoplus_user', JSON.stringify(currentUser));
                    showNotification('Login successful!', 'success');
                    showPage('dashboard');
                    return true;
                } else {
                    showNotification(data.message || 'Login failed', 'error');
                    return false;
                }
            } catch (error) {
                console.error('Login error:', error);
                showNotification('Network error. Please try again.', 'error');
                return false;
            }
        }
        
        async function registerUser(userData) {
            try {
                const response = await fetch(`${API_BASE_URL}/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification('Registration successful! Please login.', 'success');
                    showPage('login');
                    return true;
                } else {
                    showNotification(data.message || 'Registration failed', 'error');
                    return false;
                }
            } catch (error) {
                console.error('Registration error:', error);
                showNotification('Network error. Please try again.', 'error');
                return false;
            }
        }
        
        function logout() {
            currentUser = null;
            authToken = null;
            localStorage.removeItem('sokoplus_token');
            localStorage.removeItem('sokoplus_user');
            showNotification('Logged out successfully', 'success');
            showPage('home');
        }
        
        // ============================================
        // NAVIGATION & UI FUNCTIONS
        // ============================================
        
        function showPage(pageName) {
            const mobileBtn = document.getElementById('mobileMenuBtn');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileBtn && navMenu) {
                mobileBtn.classList.remove('active');
                navMenu.classList.remove('active');
            }
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            updateNavigation(pageName);
            
            const page = document.getElementById(pageName);
            if (page) {
                page.classList.add('active');
                loadPageContent(pageName);
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            return false;
        }
        
        function updateNavigation(activePage) {
            const navLinks = document.getElementById('navLinks');
            const userSection = document.getElementById('userSection');
            const heroActions = document.getElementById('heroActions');
            
            if (!navLinks) return;
            
            if (currentUser) {
                const isAdmin = currentUser.role === 'admin';
                
                navLinks.innerHTML = `
                    <a href="#" class="nav-link ${activePage === 'home' ? 'active' : ''}" onclick="return showPage('home')">
                        <i class="fas fa-home"></i> <span>Home</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'marketplace' ? 'active' : ''}" onclick="return showPage('marketplace')">
                        <i class="fas fa-store"></i> <span>Marketplace</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'create-post' ? 'active' : ''}" onclick="return showPage('create-post')">
                        <i class="fas fa-plus-circle"></i> <span>Create Post</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'dashboard' ? 'active' : ''}" onclick="return showPage('dashboard')">
                        <i class="fas fa-chart-line"></i> <span>Dashboard</span>
                    </a>
                    ${isAdmin ? `
                        <a href="#" class="nav-link ${activePage === 'admin' ? 'active' : ''}" onclick="return showPage('admin')">
                            <i class="fas fa-shield-alt"></i> <span>Admin</span>
                        </a>
                    ` : ''}
                `;
                
                userSection.innerHTML = `
                    <div class="user-avatar" onclick="return showPage('dashboard')" title="${currentUser.name}">
                        ${currentUser.name.charAt(0).toUpperCase()}
                    </div>
                    <button class="btn btn-outline" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> <span>Logout</span>
                    </button>
                `;
                
                if (heroActions) {
                    heroActions.innerHTML = `
                        <button class="btn btn-primary" onclick="return showPage('create-post')">
                            <i class="fas fa-plus-circle"></i> Create Post
                        </button>
                        <button class="btn btn-secondary" onclick="return showPage('dashboard')">
                            <i class="fas fa-chart-line"></i> My Dashboard
                        </button>
                        <button class="btn btn-outline" onclick="return showPage('marketplace')">
                            <i class="fas fa-search"></i> Browse
                        </button>
                    `;
                }
            } else {
                navLinks.innerHTML = `
                    <a href="#" class="nav-link ${activePage === 'home' ? 'active' : ''}" onclick="return showPage('home')">
                        <i class="fas fa-home"></i> <span>Home</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'marketplace' ? 'active' : ''}" onclick="return showPage('marketplace')">
                        <i class="fas fa-store"></i> <span>Marketplace</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'register' ? 'active' : ''}" onclick="return showPage('register')">
                        <i class="fas fa-user-plus"></i> <span>Register</span>
                    </a>
                    <a href="#" class="nav-link ${activePage === 'login' ? 'active' : ''}" onclick="return showPage('login')">
                        <i class="fas fa-sign-in-alt"></i> <span>Login</span>
                    </a>
                `;
                
                userSection.innerHTML = `
                    <button class="btn btn-outline" onclick="return showPage('login')">
                        <i class="fas fa-sign-in-alt"></i> <span>Login</span>
                    </button>
                    <button class="btn btn-primary" onclick="return showPage('register')">
                        <i class="fas fa-user-plus"></i> <span>Register</span>
                    </button>
                `;
                
                if (heroActions) {
                    heroActions.innerHTML = `
                        <button class="btn btn-primary" onclick="return showPage('register')">
                            <i class="fas fa-rocket"></i> Get Started Free
                        </button>
                        <button class="btn btn-outline" onclick="return showPage('marketplace')">
                            <i class="fas fa-store"></i> Browse Marketplace
                        </button>
                        <button class="btn btn-accent" onclick="toggleChatbot()">
                            <i class="fas fa-question-circle"></i> Live Help
                        </button>
                    `;
                }
            }
        }
        
        async function loadPageContent(pageName) {
            switch(pageName) {
                case 'home':
                    await loadHomeContent();
                    break;
                case 'marketplace':
                    await loadMarketplace();
                    break;
                case 'create-post':
                    await loadCreatePost();
                    break;
                case 'dashboard':
                    await loadDashboard();
                    break;
                case 'profile':
                    await loadProfile();
                    break;
                case 'admin':
                    await loadAdminPanel();
                    break;
                case 'register':
                    loadRegisterForm();
                    break;
                case 'login':
                    loadLoginForm();
                    break;
                case 'forgot-password':
                    loadForgotPasswordForm();
                    break;
                case 'subscribe':
                    loadSubscriptionForm();
                    break;
                case 'shop':
                    await loadShop();
                    break;
                case 'my-cvs':
                    await loadMyCVs();
                    break;
            }
        }
        
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        
        function formatPrice(price) {
            return 'KES ' + price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            if (days < 7) return `${days}d ago`;
            
            return date.toLocaleDateString();
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification`;
            notification.style.background = type === 'success' ? '#10B981' : 
                                          type === 'error' ? '#EF4444' : 
                                          type === 'warning' ? '#F59E0B' : '#4F46E5';
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            const container = document.getElementById('notificationContainer');
            container.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => container.removeChild(notification), 300);
            }, 5000);
            
            if (!document.querySelector('#slideOutAnimation')) {
                const style = document.createElement('style');
                style.id = 'slideOutAnimation';
                style.textContent = `
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }
        
        function showLoading() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loadingSpinner').style.display = 'none';
        }
        
        // ============================================
        // API REQUEST FUNCTIONS
        // ============================================
        
        async function apiRequest(endpoint, options = {}) {
            const url = `${API_BASE_URL}${endpoint}`;
            const headers = {
                'Content-Type': 'application/json',
                ...options.headers
            };
            
            if (authToken) {
                headers['Authorization'] = `Bearer ${authToken}`;
            }
            
            try {
                const response = await fetch(url, {
                    ...options,
                    headers
                });
                
                if (response.status === 401) {
                    // Token expired or invalid
                    logout();
                    showNotification('Session expired. Please login again.', 'error');
                    return null;
                }
                
                const data = await response.json();
                
                if (!response.ok) {
                    throw new Error(data.message || 'Request failed');
                }
                
                return data;
            } catch (error) {
                console.error('API Request error:', error);
                showNotification(error.message || 'Network error. Please try again.', 'error');
                return null;
            }
        }
        
        // ============================================
        // HOME PAGE FUNCTIONS
        // ============================================
        
        async function loadHomeContent() {
            try {
                const stats = await apiRequest('/stats');
                if (stats) {
                    updateHomeStats(stats);
                }
                
                await loadHomeTabContent('featured');
            } catch (error) {
                console.error('Error loading home content:', error);
            }
        }
        
        function updateHomeStats(stats) {
            document.getElementById('totalUsers').textContent = stats.totalUsers || '0';
            document.getElementById('totalPosts').textContent = stats.totalPosts || '0';
            document.getElementById('totalEarnings').textContent = formatPrice(stats.totalEarnings || 0);
            document.getElementById('activeTransactions').textContent = stats.activeTransactions || '0';
        }
        
        function filterMarketplace(category) {
            showPage('marketplace');
            setTimeout(() => {
                document.getElementById('marketplaceCategory').value = category;
                loadMarketplace();
            }, 100);
        }
        
        function showHomeTab(tabName) {
            document.querySelectorAll('#homeContentTabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelectorAll('#homeContentTabs .tab-btn').forEach(btn => {
                if (btn.textContent.toLowerCase().includes(tabName)) {
                    btn.classList.add('active');
                }
            });
            
            document.querySelectorAll('.content-tab').forEach(tab => {
                tab.style.display = 'none';
            });
            
            const tab = document.getElementById(`${tabName}Tab`);
            if (tab) {
                tab.style.display = 'block';
                loadHomeTabContent(tabName);
            }
        }
        
        async function loadHomeTabContent(tabName) {
            try {
                let endpoint = '';
                switch(tabName) {
                    case 'featured':
                        endpoint = '/posts/featured';
                        break;
                    case 'products':
                        endpoint = '/posts?type=product&limit=6';
                        break;
                    case 'social':
                        endpoint = '/posts?type=social&limit=4';
                        break;
                    case 'jobs':
                        endpoint = '/posts?type=job&limit=6';
                        break;
                    case 'boosted':
                        endpoint = '/posts?boosted=true&limit=6';
                        break;
                }
                
                const response = await apiRequest(endpoint);
                if (response && response.posts) {
                    const containerId = `featured${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`;
                    const container = document.getElementById(containerId);
                    
                    if (container) {
                        container.innerHTML = response.posts.map(post => {
                            if (post.type === 'product') return createProductCard(post);
                            if (post.type === 'social') return createSocialCard(post);
                            if (post.type === 'job') return createJobCard(post);
                            if (post.type === 'service') return createServiceCard(post);
                            return '';
                        }).join('');
                        
                        if (response.posts.length === 0) {
                            container.innerHTML = `
                                <div class="empty-state">
                                    <i class="fas fa-${tabName === 'products' ? 'box' : tabName === 'social' ? 'users' : 'briefcase'}"></i>
                                    <h3 style="color: var(--white);">No ${tabName} posts yet</h3>
                                    <p>Be the first to create a ${tabName} post!</p>
                                </div>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error(`Error loading ${tabName}:`, error);
            }
        }
        
        // ============================================
        // CARD CREATION FUNCTIONS
        // ============================================
        
        function createProductCard(post) {
            return `
                <div class="card product-card" onclick="viewPost('${post._id}')">
                    <div class="card-image">
                        ${post.images && post.images.length > 0 ? 
                            `<img src="${post.images[0]}" alt="${post.title}">` :
                            `<div style="width: 100%; height: 100%; background: linear-gradient(135deg, var(--primary), var(--accent)); display: flex; align-items: center; justify-content: center; color: var(--secondary); font-size: 3rem;">
                                <i class="fas fa-box"></i>
                            </div>`
                        }
                        ${post.boosted ? '<span class="boost-badge"><i class="fas fa-rocket"></i> BOOSTED</span>' : ''}
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${post.title}</h3>
                        <div class="card-price">${formatPrice(post.price)}</div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                            <span style="color: var(--light-gray); font-size: 0.875rem;">
                                <i class="fas fa-map-marker-alt"></i> ${post.location}
                            </span>
                            <span style="color: var(--light-gray); font-size: 0.875rem;">
                                ${post.user?.name || 'User'}
                            </span>
                        </div>
                        <div style="color: var(--light-gray); font-size: 0.75rem; margin-top: 0.5rem;">
                            <i class="far fa-eye"></i> ${post.views || 0} views
                        </div>
                    </div>
                </div>
            `;
        }
        
        function createSocialCard(post) {
            const content = post.content.length > 150 ? post.content.substring(0, 150) + '...' : post.content;
            
            return `
                <div class="card social-card" onclick="viewPost('${post._id}')">
                    <div class="card-header">
                        ${post.user?.profilePicture ? 
                            `<img src="${post.user.profilePicture}" alt="${post.user.name}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">` :
                            `<div class="user-avatar-sm">
                                ${post.user?.name?.charAt(0)?.toUpperCase() || 'U'}
                            </div>`
                        }
                        <div>
                            <div style="font-weight: 600; color: var(--white);">${post.user?.name || 'User'}</div>
                            <div style="color: var(--light-gray); font-size: 0.875rem;">
                                ${formatDate(post.createdAt)}
                            </div>
                        </div>
                    </div>
                    <div class="post-content">
                        <p>${content}</p>
                        ${post.images && post.images.length > 0 ? 
                            `<div style="margin-top: 1rem; display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                                ${post.images.slice(0, 2).map(image => 
                                    `<img src="${image}" alt="Post media" style="width: 100%; height: 100px; object-fit: cover; border-radius: var(--radius);">`
                                ).join('')}
                                ${post.images.length > 2 ? 
                                    `<div style="background: var(--dark); border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--light-gray);">
                                        +${post.images.length - 2} more
                                    </div>` : ''
                                }
                            </div>` : ''
                        }
                    </div>
                    <div class="post-actions">
                        <button class="post-action" onclick="event.stopPropagation(); likePost('${post._id}')">
                            <i class="far fa-heart"></i> ${post.likes?.length || 0}
                        </button>
                        <button class="post-action" onclick="event.stopPropagation(); sharePost('${post._id}')">
                            <i class="fas fa-share"></i> Share
                        </button>
                        ${post.boosted ? 
                            `<span class="badge badge-secondary" style="font-size: 0.75rem;">
                                <i class="fas fa-rocket"></i> Boosted
                            </span>` : ''
                        }
                    </div>
                </div>
            `;
        }
        
        function createJobCard(post) {
            return `
                <div class="card job-card" onclick="viewPost('${post._id}')">
                    <div class="card-header">
                        <span class="job-type">${post.jobType?.toUpperCase() || 'FULL-TIME'}</span>
                        <h3 class="card-title">${post.title}</h3>
                        <div style="color: var(--light-gray); font-size: 0.875rem; margin-top: 0.5rem;">
                            <i class="fas fa-building"></i> ${post.company}
                        </div>
                    </div>
                    <div class="card-content">
                        <p style="color: var(--light-gray); margin-bottom: 1rem;">
                            ${post.description?.length > 100 ? post.description.substring(0, 100) + '...' : post.description}
                        </p>
                        <div class="job-salary">
                            ${formatPrice(post.salaryMin)} - ${formatPrice(post.salaryMax)}
                        </div>
                        <div style="color: var(--light-gray); font-size: 0.875rem;">
                            <i class="fas fa-map-marker-alt"></i> ${post.location}
                        </div>
                        <div style="color: var(--light-gray); font-size: 0.75rem; margin-top: 0.5rem;">
                            <i class="far fa-eye"></i> ${post.views || 0} views
                        </div>
                    </div>
                </div>
            `;
        }
        
        function createServiceCard(post) {
            return `
                <div class="card product-card" onclick="viewPost('${post._id}')">
                    <div class="card-image">
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, var(--business), #0891B2); display: flex; align-items: center; justify-content: center; color: var(--secondary); font-size: 3rem;">
                            <i class="fas fa-concierge-bell"></i>
                        </div>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">${post.title}</h3>
                        <div class="card-price">${formatPrice(post.priceMin)} - ${formatPrice(post.priceMax)}</div>
                        <div style="color: var(--light-gray); font-size: 0.875rem; margin: 0.5rem 0;">
                            <i class="fas fa-map-marker-alt"></i> ${post.location}
                        </div>
                        <div style="color: var(--light-gray); font-size: 0.75rem;">
                            <i class="far fa-eye"></i> ${post.views || 0} views
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ============================================
        // MARKETPLACE FUNCTIONS
        // ============================================
        
        async function loadMarketplace(page = 1) {
            const search = document.getElementById('marketplaceSearch')?.value || '';
            const category = document.getElementById('marketplaceCategory')?.value || '';
            const sort = document.getElementById('marketplaceSort')?.value || 'newest';
            
            let endpoint = `/posts?page=${page}&limit=12`;
            
            if (search) endpoint += `&search=${encodeURIComponent(search)}`;
            if (category) endpoint += `&category=${category}`;
            if (sort) endpoint += `&sort=${sort}`;
            
            try {
                const response = await apiRequest(endpoint);
                if (response) {
                    const container = document.getElementById('marketplaceContent');
                    if (container) {
                        container.innerHTML = response.posts.map(post => {
                            if (post.type === 'product') return createProductCard(post);
                            if (post.type === 'social') return createSocialCard(post);
                            if (post.type === 'job') return createJobCard(post);
                            if (post.type === 'service') return createServiceCard(post);
                            return '';
                        }).join('');
                        
                        if (response.posts.length === 0) {
                            container.innerHTML = `
                                <div class="empty-state">
                                    <i class="fas fa-search"></i>
                                    <h3 style="color: var(--white);">No posts found</h3>
                                    <p>Try changing your search criteria</p>
                                </div>
                            `;
                        }
                    }
                    
                    // Update pagination
                    updatePagination(response.totalPages, response.currentPage);
                }
            } catch (error) {
                console.error('Error loading marketplace:', error);
            }
        }
        
        function updatePagination(totalPages, currentPage) {
            const container = document.getElementById('marketplacePagination');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Previous button
            if (currentPage > 1) {
                const prevBtn = document.createElement('button');
                prevBtn.className = 'btn btn-outline btn-sm';
                prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                prevBtn.onclick = () => loadMarketplace(currentPage - 1);
                container.appendChild(prevBtn);
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    const pageBtn = document.createElement('button');
                    pageBtn.className = `btn btn-sm ${i === currentPage ? 'btn-primary' : 'btn-outline'}`;
                    pageBtn.textContent = i;
                    pageBtn.onclick = () => loadMarketplace(i);
                    container.appendChild(pageBtn);
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    const ellipsis = document.createElement('span');
                    ellipsis.className = 'btn btn-sm btn-outline';
                    ellipsis.textContent = '...';
                    ellipsis.style.cursor = 'default';
                    container.appendChild(ellipsis);
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                const nextBtn = document.createElement('button');
                nextBtn.className = 'btn btn-outline btn-sm';
                nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                nextBtn.onclick = () => loadMarketplace(currentPage + 1);
                container.appendChild(nextBtn);
            }
        }
        
        // ============================================
        // POST CREATION FUNCTIONS
        // ============================================
        
        function showPostForm(formType) {
            document.querySelectorAll('.post-form').forEach(form => {
                form.classList.remove('active');
            });
            document.querySelectorAll('.post-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(`${formType}Form`).classList.add('active');
            event.currentTarget.classList.add('active');
        }
        
        function previewMedia(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            preview.innerHTML = '';
            
            Array.from(input.files).forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const mediaDiv = document.createElement('div');
                    mediaDiv.className = 'media-preview';
                    
                    if (file.type.startsWith('image/')) {
                        mediaDiv.innerHTML = `
                            <img src="${e.target.result}" alt="Preview">
                            <button class="remove-media" onclick="removeMedia(${index}, '${inputId}')">×</button>
                        `;
                    } else if (file.type.startsWith('video/')) {
                        mediaDiv.innerHTML = `
                            <video controls>
                                <source src="${e.target.result}" type="${file.type}">
                            </video>
                            <button class="remove-media" onclick="removeMedia(${index}, '${inputId}')">×</button>
                        `;
                    }
                    
                    preview.appendChild(mediaDiv);
                };
                reader.readAsDataURL(file);
            });
        }
        
        function removeMedia(index, inputId) {
            const input = document.getElementById(inputId);
            const dt = new DataTransfer();
            
            Array.from(input.files).forEach((file, i) => {
                if (i !== index) dt.items.add(file);
            });
            
            input.files = dt.files;
            previewMedia(inputId, inputId + 'Preview');
        }
        
        function previewCV() {
            const fileInput = document.getElementById('cvFile');
            const preview = document.getElementById('cvPreview');
            
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <i class="fas fa-file-pdf"></i>
                        <h4>${file.name}</h4>
                        <p>${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                        <small style="color: var(--light-gray);">Ready to upload</small>
                    `;
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        async function createProductPost() {
            if (!currentUser) {
                showNotification('Please login to create a post', 'error');
                showPage('login');
                return;
            }
            
            // Check if user is subscribed
            if (!currentUser.subscription?.active) {
                showNotification('You need an active subscription to post. Please subscribe first.', 'error');
                showPage('subscribe');
                return;
            }
            
            const postData = {
                type: 'product',
                title: document.getElementById('productTitle').value,
                description: document.getElementById('productDescription').value,
                price: parseInt(document.getElementById('productPrice').value),
                category: document.getElementById('productCategory').value,
                location: document.getElementById('productLocation').value,
                whatsapp: document.getElementById('productWhatsapp').value,
                boosted: document.getElementById('boostProduct').checked
            };
            
            try {
                const response = await apiRequest('/posts', {
                    method: 'POST',
                    body: JSON.stringify(postData)
                });
                
                if (response) {
                    showNotification('Product posted successfully!', 'success');
                    
                    // Handle file uploads if any
                    const files = document.getElementById('productMedia').files;
                    if (files.length > 0) {
                        await uploadPostMedia(response.post._id, files);
                    }
                    
                    showPage('dashboard');
                }
            } catch (error) {
                console.error('Error creating product post:', error);
            }
        }
        
        async function createSocialPost() {
            if (!currentUser) return;
            
            // Check if user is subscribed
            if (!currentUser.subscription?.active) {
                showNotification('You need an active subscription to post. Please subscribe first.', 'error');
                showPage('subscribe');
                return;
            }
            
            const postData = {
                type: 'social',
                content: document.getElementById('socialContent').value,
                boosted: document.getElementById('boostSocial').checked
            };
            
            try {
                const response = await apiRequest('/posts', {
                    method: 'POST',
                    body: JSON.stringify(postData)
                });
                
                if (response) {
                    showNotification('Social post created successfully!', 'success');
                    
                    // Handle file uploads if any
                    const files = document.getElementById('socialMedia').files;
                    if (files.length > 0) {
                        await uploadPostMedia(response.post._id, files);
                    }
                    
                    showPage('dashboard');
                }
            } catch (error) {
                console.error('Error creating social post:', error);
            }
        }
        
        async function createJobPost() {
            if (!currentUser) return;
            
            // Check if user is subscribed
            if (!currentUser.subscription?.active) {
                showNotification('You need an active subscription to post. Please subscribe first.', 'error');
                showPage('subscribe');
                return;
            }
            
            const postData = {
                type: 'job',
                title: document.getElementById('jobTitle').value,
                company: document.getElementById('jobCompany').value,
                description: document.getElementById('jobDescription').value,
                jobType: document.getElementById('jobType').value,
                salaryMin: parseInt(document.getElementById('jobSalaryMin').value),
                salaryMax: parseInt(document.getElementById('jobSalaryMax').value),
                location: document.getElementById('jobLocation').value,
                whatsapp: document.getElementById('jobWhatsapp').value,
                applyLink: document.getElementById('jobApply').value,
                boosted: document.getElementById('boostJob').checked
            };
            
            try {
                const response = await apiRequest('/posts', {
                    method: 'POST',
                    body: JSON.stringify(postData)
                });
                
                if (response) {
                    showNotification('Job posted successfully!', 'success');
                    
                    // Handle file uploads if any
                    const files = document.getElementById('jobMedia').files;
                    if (files.length > 0) {
                        await uploadPostMedia(response.post._id, files);
                    }
                    
                    showPage('dashboard');
                }
            } catch (error) {
                console.error('Error creating job post:', error);
            }
        }
        
        async function createServicePost() {
            if (!currentUser) return;
            
            // Check if user is subscribed
            if (!currentUser.subscription?.active) {
                showNotification('You need an active subscription to post. Please subscribe first.', 'error');
                showPage('subscribe');
                return;
            }
            
            const postData = {
                type: 'service',
                title: document.getElementById('serviceTitle').value,
                description: document.getElementById('serviceDescription').value,
                category: document.getElementById('serviceCategory').value,
                priceMin: parseInt(document.getElementById('servicePriceMin').value),
                priceMax: parseInt(document.getElementById('servicePriceMax').value),
                location: document.getElementById('serviceLocation').value,
                whatsapp: document.getElementById('serviceWhatsapp').value
            };
            
            try {
                const response = await apiRequest('/posts', {
                    method: 'POST',
                    body: JSON.stringify(postData)
                });
                
                if (response) {
                    showNotification('Service listed successfully!', 'success');
                    
                    // Handle file uploads if any
                    const files = document.getElementById('serviceMedia').files;
                    if (files.length > 0) {
                        await uploadPostMedia(response.post._id, files);
                    }
                    
                    showPage('dashboard');
                }
            } catch (error) {
                console.error('Error creating service post:', error);
            }
        }
        
        async function uploadPostMedia(postId, files) {
            const formData = new FormData();
            Array.from(files).forEach(file => {
                formData.append('images', file);
            });
            
            try {
                const response = await fetch(`${API_BASE_URL}/posts/${postId}/images`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error('Failed to upload images');
                }
            } catch (error) {
                console.error('Error uploading images:', error);
                showNotification('Post created but images failed to upload', 'warning');
            }
        }
        
        async function uploadCV() {
            if (!currentUser) {
                showNotification('Please login to upload CV', 'error');
                showPage('login');
                return;
            }
            
            const fileInput = document.getElementById('cvFile');
            if (fileInput.files.length === 0) {
                showNotification('Please select a CV file', 'error');
                return;
            }
            
            const formData = new FormData();
            formData.append('cv', fileInput.files[0]);
            formData.append('title', document.getElementById('cvTitle').value);
            formData.append('summary', document.getElementById('cvSummary').value);
            formData.append('skills', document.getElementById('cvSkills').value);
            formData.append('experience', document.getElementById('cvExperience').value);
            formData.append('salary', document.getElementById('cvSalary').value);
            formData.append('location', document.getElementById('cvLocation').value);
            
            try {
                const response = await fetch(`${API_BASE_URL}/users/cv`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    showNotification('CV uploaded successfully!', 'success');
                    showPage('my-cvs');
                } else {
                    showNotification(data.message || 'Failed to upload CV', 'error');
                }
            } catch (error) {
                console.error('Error uploading CV:', error);
                showNotification('Network error. Please try again.', 'error');
            }
        }
        
        // ============================================
        // DASHBOARD FUNCTIONS
        // ============================================
        
        async function loadDashboard() {
            if (!currentUser) {
                showNotification('Please login to view dashboard', 'error');
                showPage('login');
                return;
            }
            
            try {
                // Load user stats
                const stats = await apiRequest('/users/stats');
                if (stats) {
                    updateDashboardStats(stats);
                }
                
                // Load user profile
                updateProfileHeader();
                
                // Load referral link
                updateReferralLink();
                
                // Load user posts
                showDashboardTab('myProducts');
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }
        
        function updateDashboardStats(stats) {
            document.getElementById('myProductsCount').textContent = stats.productsCount || 0;
            document.getElementById('myJobsCount').textContent = stats.jobsCount || 0;
            document.getElementById('myEarnings').textContent = formatPrice(stats.availableBalance || 0);
            document.getElementById('totalViews').textContent = stats.totalViews || 0;
            document.getElementById('totalReferrals').textContent = stats.totalReferrals || 0;
            document.getElementById('earnedAmount').textContent = formatPrice(stats.totalEarned || 0);
            document.getElementById('withdrawnAmount').textContent = formatPrice(stats.totalWithdrawn || 0);
        }
        
        function updateProfileHeader() {
            if (currentUser) {
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profilePhone').textContent = currentUser.phone;
                
                const avatar = document.getElementById('profileAvatar');
                if (currentUser.profilePicture) {
                    avatar.innerHTML = `<img src="${currentUser.profilePicture}" alt="${currentUser.name}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;
                } else {
                    avatar.textContent = currentUser.name.charAt(0).toUpperCase();
                }
                
                const status = document.getElementById('profileStatus');
                status.innerHTML = `
                    <span class="badge ${currentUser.subscription?.active ? 'badge-success' : 'badge-warning'}">
                        ${currentUser.subscription?.active ? 'Active Subscription' : 'No Subscription'}
                    </span>
                    ${currentUser.verified ? '<span class="badge badge-info ml-2">Verified</span>' : ''}
                    ${currentUser.upgraded ? '<span class="badge badge-secondary ml-2">Premium</span>' : ''}
                `;
            }
        }
        
        function showDashboardTab(tabName) {
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.style.display = 'none';
            });
            document.querySelectorAll('.content-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const tab = document.getElementById(`${tabName}Tab`);
            if (tab) tab.style.display = 'block';
            
            event.currentTarget.classList.add('active');
            loadDashboardTabContent(tabName);
        }
        
        async function loadDashboardTabContent(tabName) {
            try {
                let endpoint = '';
                switch(tabName) {
                    case 'myProducts':
                        endpoint = '/users/posts?type=product';
                        break;
                    case 'myServices':
                        endpoint = '/users/posts?type=service';
                        break;
                    case 'mySocial':
                        endpoint = '/users/posts?type=social';
                        break;
                    case 'myJobs':
                        endpoint = '/users/posts?type=job';
                        break;
                    case 'myBoosted':
                        endpoint = '/users/posts?boosted=true';
                        break;
                }
                
                const response = await apiRequest(endpoint);
                if (response) {
                    const container = document.getElementById(`${tabName}Grid`);
                    if (container) {
                        container.innerHTML = response.posts.map(post => {
                            if (post.type === 'product') return createProductCard(post);
                            if (post.type === 'social') return createSocialCard(post);
                            if (post.type === 'job') return createJobCard(post);
                            if (post.type === 'service') return createServiceCard(post);
                            return '';
                        }).join('');
                        
                        if (response.posts.length === 0) {
                            container.innerHTML = `
                                <div class="empty-state">
                                    <i class="fas fa-${tabName.includes('product') ? 'box' : tabName.includes('service') ? 'concierge-bell' : tabName.includes('social') ? 'users' : 'briefcase'}"></i>
                                    <h3 style="color: var(--white);">No ${tabName.replace('my', '')} yet</h3>
                                    <p>Create your first ${tabName.replace('my', '')} post!</p>
                                </div>
                            `;
                        }
                    }
                }
            } catch (error) {
                console.error(`Error loading ${tabName}:`, error);
            }
        }
        
        // ============================================
        // REFERRAL & WITHDRAWAL FUNCTIONS
        // ============================================
        
        function copyReferralLink() {
            const link = document.getElementById('referralLink');
            link.select();
            link.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(link.value);
            showNotification('Referral link copied to clipboard!', 'success');
        }
        
        function updateReferralLink() {
            if (currentUser && currentUser.referralCode) {
                const link = `${window.location.origin}?ref=${currentUser.referralCode}`;
                document.getElementById('referralLink').value = link;
            }
        }
        
        function shareReferralLink() {
            const link = document.getElementById('referralLink').value;
            const text = `Join me on SOKOPLUS - Kenyans fastest growing marketplace! Use my referral link: ${link}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Join SOKOPLUS',
                    text: text,
                    url: link
                });
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    showNotification('Referral message copied to clipboard! Share it on WhatsApp, Facebook, etc.', 'success');
                });
            }
        }
        
        async function requestWithdrawal() {
            const amount = parseInt(document.getElementById('withdrawalAmount').value);
            const mpesaNumber = document.getElementById('withdrawalMpesa').value;
            
            if (!amount || amount < 100) {
                showNotification('Minimum withdrawal is KES 100', 'error');
                return;
            }
            
            if (!/^2547\d{8}$/.test(mpesaNumber)) {
                showNotification('Invalid M-Pesa number. Use format: 2547XXXXXXXX', 'error');
                return;
            }
            
            try {
                const response = await apiRequest('/withdrawals', {
                    method: 'POST',
                    body: JSON.stringify({
                        amount,
                        mpesaNumber
                    })
                });
                
                if (response) {
                    showNotification(`Withdrawal request of KES ${amount} submitted for admin approval`, 'success');
                    document.getElementById('withdrawalAmount').value = '';
                    document.getElementById('withdrawalMpesa').value = '';
                    
                    // Refresh dashboard stats
                    const stats = await apiRequest('/users/stats');
                    if (stats) {
                        updateDashboardStats(stats);
                    }
                }
            } catch (error) {
                console.error('Error requesting withdrawal:', error);
            }
        }
        
        // ============================================
        // SHOP FUNCTIONS
        // ============================================
        
        async function loadShop() {
            if (!currentUser) {
                showNotification('Please login to view shop', 'error');
                showPage('login');
                return;
            }
            
            try {
                const response = await apiRequest('/users/shop');
                if (response) {
                    updateShopHeader(response.shop);
                    showShopTab('products');
                }
            } catch (error) {
                console.error('Error loading shop:', error);
            }
        }
        
        function updateShopHeader(shop) {
            const header = document.getElementById('shopHeader');
            if (!shop) {
                header.innerHTML = `
                    <div style="width: 100%; text-align: center; padding: 2rem;">
                        <div class="shop-avatar-lg" style="margin: 0 auto 1rem;">
                            <i class="fas fa-store"></i>
                        </div>
                        <h2>Create Your Shop</h2>
                        <p style="color: var(--light-gray); margin-bottom: 2rem;">Start selling your products and services in your own shop</p>
                        <button class="btn btn-primary" onclick="showShopTab('settings')">
                            <i class="fas fa-plus"></i> Create Shop
                        </button>
                    </div>
                `;
            } else {
                header.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 2rem; width: 100%;">
                        ${shop.logo ? 
                            `<img src="${shop.logo}" alt="${shop.name}" style="width: 120px; height: 120px; border-radius: var(--radius-xl); object-fit: cover; border: 3px solid var(--secondary);">` :
                            `<div class="shop-avatar-lg">
                                <i class="fas fa-store"></i>
                            </div>`
                        }
                        <div style="flex: 1;">
                            <h2>${shop.name}</h2>
                            <p style="color: var(--light-gray); margin-bottom: 1rem;">${shop.description || 'No description'}</p>
                            <div class="shop-stats">
                                <div class="shop-stat">
                                    <span class="shop-stat-value">${shop.productsCount || 0}</span>
                                    <span class="shop-stat-label">Products</span>
                                </div>
                                <div class="shop-stat">
                                    <span class="shop-stat-value">${shop.servicesCount || 0}</span>
                                    <span class="shop-stat-label">Services</span>
                                </div>
                                <div class="shop-stat">
                                    <span class="shop-stat-value">${shop.totalSales || 0}</span>
                                    <span class="shop-stat-label">Sales</span>
                                </div>
                                <div class="shop-stat">
                                    <span class="shop-stat-value">${shop.rating || '0.0'}</span>
                                    <span class="shop-stat-label">Rating</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }
        
        function showShopTab(tabName) {
            document.querySelectorAll('.dashboard-tab').forEach(tab => {
                tab.style.display = 'none';
            });
            document.querySelectorAll('.content-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const tab = document.getElementById(`shop${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`);
            if (tab) tab.style.display = 'block';
            
            event.currentTarget.classList.add('active');
            loadShopTabContent(tabName);
        }
        
        async function loadShopTabContent(tabName) {
            try {
                if (tabName === 'products') {
                    const response = await apiRequest('/users/shop/products');
                    if (response) {
                        const container = document.getElementById('shopProductsGrid');
                        if (container) {
                            container.innerHTML = response.products.map(createProductCard).join('');
                        }
                    }
                } else if (tabName === 'services') {
                    const response = await apiRequest('/users/shop/services');
                    if (response) {
                        const container = document.getElementById('shopServicesGrid');
                        if (container) {
                            container.innerHTML = response.services.map(createServiceCard).join('');
                        }
                    }
                }
            } catch (error) {
                console.error(`Error loading shop ${tabName}:`, error);
            }
        }
        
        async function updateShopSettings() {
            const formData = {
                name: document.getElementById('shopName').value,
                description: document.getElementById('shopDescription').value,
                category: document.getElementById('shopCategory').value,
                whatsapp: document.getElementById('shopWhatsapp').value,
                location: document.getElementById('shopLocation').value,
                hours: document.getElementById('shopHours').value
            };
            
            try {
                const response = await apiRequest('/users/shop', {
                    method: 'PUT',
                    body: JSON.stringify(formData)
                });
                
                if (response) {
                    showNotification('Shop settings saved successfully!', 'success');
                    
                    // Handle logo upload if any
                    const logoFile = document.getElementById('shopLogo').files[0];
                    if (logoFile) {
                        await uploadShopLogo(logoFile);
                    }
                    
                    // Handle banner upload if any
                    const bannerFile = document.getElementById('shopBanner').files[0];
                    if (bannerFile) {
                        await uploadShopBanner(bannerFile);
                    }
                    
                    // Reload shop
                    await loadShop();
                }
            } catch (error) {
                console.error('Error updating shop settings:', error);
            }
        }
        
        async function uploadShopLogo(file) {
            const formData = new FormData();
            formData.append('logo', file);
            
            try {
                const response = await fetch(`${API_BASE_URL}/users/shop/logo`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error('Failed to upload logo');
                }
            } catch (error) {
                console.error('Error uploading shop logo:', error);
            }
        }
        
        async function uploadShopBanner(file) {
            const formData = new FormData();
            formData.append('banner', file);
            
            try {
                const response = await fetch(`${API_BASE_URL}/users/shop/banner`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error('Failed to upload banner');
                }
            } catch (error) {
                console.error('Error uploading shop banner:', error);
            }
        }
        
        // ============================================
        // CV MANAGEMENT FUNCTIONS
        // ============================================
        
        async function loadMyCVs() {
            if (!currentUser) {
                showNotification('Please login to view CVs', 'error');
                showPage('login');
                return;
            }
            
            try {
                const response = await apiRequest('/users/cv');
                const container = document.getElementById('cvList');
                
                if (response && response.cvs && response.cvs.length > 0) {
                    container.innerHTML = response.cvs.map(cv => `
                        <div class="cv-item" onclick="viewCV('${cv._id}')">
                            <div class="cv-item-header">
                                <div class="cv-item-icon">
                                    <i class="fas fa-file-pdf"></i>
                                </div>
                                <div>
                                    <h4 style="color: var(--white);">${cv.title}</h4>
                                    <p style="color: var(--light-gray); font-size: 0.875rem;">
                                        Uploaded: ${formatDate(cv.uploadedAt)}
                                    </p>
                                </div>
                            </div>
                            <div>
                                <p style="color: var(--light-gray); font-size: 0.875rem;">
                                    ${cv.summary || 'No summary provided'}
                                </p>
                                <div style="margin-top: 0.5rem;">
                                    ${cv.skills ? cv.skills.split(',').slice(0, 3).map(skill => 
                                        `<span class="badge badge-primary" style="margin-right: 0.25rem; margin-bottom: 0.25rem;">${skill.trim()}</span>`
                                    ).join('') : ''}
                                </div>
                            </div>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = `
                        <div class="empty-state" style="grid-column: 1 / -1;">
                            <i class="fas fa-file-alt"></i>
                            <h3 style="color: var(--white);">No CVs Uploaded</h3>
                            <p>Upload your CV to showcase your skills to potential employers</p>
                            <button class="btn btn-primary mt-3" onclick="showPage('create-post')">
                                <i class="fas fa-upload"></i> Upload CV
                            </button>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error loading CVs:', error);
            }
        }
        
        // ============================================
        // PROFILE FUNCTIONS
        // ============================================
        
        async function loadProfile() {
            if (!currentUser) {
                showNotification('Please login to edit profile', 'error');
                showPage('login');
                return;
            }
            
            document.getElementById('profileNameInput').value = currentUser.name;
            document.getElementById('profileEmailInput').value = currentUser.email;
            document.getElementById('profilePhoneInput').value = currentUser.phone;
            document.getElementById('profileLocation').value = currentUser.location || '';
            document.getElementById('profileBio').value = currentUser.bio || '';
            document.getElementById('profileBusiness').value = currentUser.businessName || '';
        }
        
        async function updateProfile() {
            const formData = {
                name: document.getElementById('profileNameInput').value,
                email: document.getElementById('profileEmailInput').value,
                phone: document.getElementById('profilePhoneInput').value,
                location: document.getElementById('profileLocation').value,
                bio: document.getElementById('profileBio').value,
                businessName: document.getElementById('profileBusiness').value
            };
            
            // Handle password change if provided
            const currentPassword = document.getElementById('profileCurrentPassword').value;
            const newPassword = document.getElementById('profileNewPassword').value;
            const confirmPassword = document.getElementById('profileConfirmPassword').value;
            
            if (currentPassword && newPassword) {
                if (newPassword !== confirmPassword) {
                    showNotification('New passwords do not match', 'error');
                    return;
                }
                formData.currentPassword = currentPassword;
                formData.newPassword = newPassword;
            }
            
            try {
                const response = await apiRequest('/users/profile', {
                    method: 'PUT',
                    body: JSON.stringify(formData)
                });
                
                if (response) {
                    // Update current user
                    currentUser = { ...currentUser, ...response.user };
                    localStorage.setItem('sokoplus_user', JSON.stringify(currentUser));
                    
                    showNotification('Profile updated successfully!', 'success');
                    
                    // Handle profile picture upload if any
                    const pictureFile = document.getElementById('profilePicture').files[0];
                    if (pictureFile) {
                        await uploadProfilePicture(pictureFile);
                    }
                    
                    // Clear password fields
                    document.getElementById('profileCurrentPassword').value = '';
                    document.getElementById('profileNewPassword').value = '';
                    document.getElementById('profileConfirmPassword').value = '';
                }
            } catch (error) {
                console.error('Error updating profile:', error);
            }
        }
        
        async function uploadProfilePicture(file) {
            const formData = new FormData();
            formData.append('profilePicture', file);
            
            try {
                const response = await fetch(`${API_BASE_URL}/users/profile/picture`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: formData
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentUser.profilePicture = data.profilePicture;
                    localStorage.setItem('sokoplus_user', JSON.stringify(currentUser));
                    showNotification('Profile picture updated!', 'success');
                }
            } catch (error) {
                console.error('Error uploading profile picture:', error);
            }
        }
        
        // ============================================
        // CHATBOT FUNCTIONS
        // ============================================
        
        function initChatbot() {
            addBotMessage("Hello! I'm SOKOPLUS Assistant. How can I help you with our marketplace today?");
        }
        
        function toggleChatbot() {
            const chatbot = document.getElementById('chatbotContainer');
            chatbot.classList.toggle('active');
            
            if (chatbot.classList.contains('active')) {
                setTimeout(() => {
                    const messages = document.getElementById('chatbotMessages');
                    messages.scrollTop = messages.scrollHeight;
                }, 100);
            }
        }
        
        function addBotMessage(text) {
            const messages = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message bot';
            messageDiv.innerHTML = `
                <div class="message-bubble bot">${text}</div>
            `;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
        }
        
        function addUserMessage(text) {
            const messages = document.getElementById('chatbotMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message user';
            messageDiv.innerHTML = `
                <div class="message-bubble user">${text}</div>
            `;
            messages.appendChild(messageDiv);
            messages.scrollTop = messages.scrollHeight;
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatbotInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addUserMessage(message);
            input.value = '';
            
            // Simulate bot response
            setTimeout(() => {
                const response = getBotResponse(message);
                addBotMessage(response);
            }, 500);
        }
        
        function sendQuickQuestion(question) {
            addUserMessage(question);
            
            setTimeout(() => {
                const response = getBotResponse(question);
                addBotMessage(response);
            }, 500);
        }
        
        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('post') || lowerMessage.includes('create') || lowerMessage.includes('upload')) {
                return "To create a post on SOKOPLUS:\n1. You must have an active subscription (KES 50/week)\n2. Click 'Create Post' in the navigation\n3. Choose Product, Social, Job, or Service post type\n4. Fill in the details and upload images/videos\n5. Submit for posting\n\nSubscribed users can post for free and access business tools!";
            } else if (lowerMessage.includes('subscribe') || lowerMessage.includes('cost') || lowerMessage.includes('price')) {
                return `Subscription is KES 50 per week. Benefits:\n• Unlimited free posts\n• Access to marketplace\n• Earn 50% referral commissions (KES 25 per referral)\n• Basic business tools\n\nPay via M-Pesa: Paybill 222111, Account 5414200\nNote: Admin approval required after payment`;
            } else if (lowerMessage.includes('earn') || lowerMessage.includes('money') || lowerMessage.includes('commission')) {
                return "Earn money on SOKOPLUS:\n1. Refer friends - Get 50% commission (KES 25) when they subscribe\n2. When referred friends upgrade (KES 200), earn another 50% (KES 100)\n3. Sell products/services\n4. Withdraw earnings via M-Pesa (10% fee applies)\n\nMinimum withdrawal: KES 100";
            } else if (lowerMessage.includes('upgrade') || lowerMessage.includes('premium')) {
                return "Upgrade to premium for KES 200/month. Benefits:\n• Free post boosting (normally KES 100/post)\n• Advanced business tools\n• Shop creation\n• Priority support\n• Enhanced analytics\n\n50% commission (KES 100) paid to referrer when someone upgrades!";
            } else if (lowerMessage.includes('shop')) {
                return "Create your own shop on SOKOPLUS:\n1. Upgrade to premium (KES 200/month)\n2. Go to Shop settings\n3. Customize your shop\n4. Add products and services\n5. Start selling!\n\nPremium users get free post boosting!";
            } else if (lowerMessage.includes('cv') || lowerMessage.includes('resume')) {
                return "Upload your CV on SOKOPLUS:\n1. Go to Create Post\n2. Select 'Upload CV' tab\n3. Fill in your details\n4. Upload your CV file\n5. Employers can view your CV\n\nShowcase your skills to potential employers!";
            } else if (lowerMessage.includes('admin') || lowerMessage.includes('contact') || lowerMessage.includes('help')) {
                return `Contact SOKOPLUS admin:\n• Email: sokoplus254@gmail.com\n• WhatsApp: +254712883849\n• Paybill: 222111\n• Account: 5414200\n\nSubscriptions require admin approval within 24 hours`;
            } else if (lowerMessage.includes('boost') || lowerMessage.includes('visibility')) {
                return "Boost your posts for increased visibility:\n• Regular users: KES 100 per boost\n• Premium users: Free boosting\n• Boosted posts get priority placement\n• Featured in Boosted section\n• Increased engagement\n\nUpgrade to premium for free boosting!";
            } else {
                const responses = [
                    "I'm here to help with SOKOPLUS questions! Ask me about posting, subscriptions, business tools, or earnings.",
                    "You can ask me about marketplace features, business tools, payments, or contacting support.",
                    "Check our FAQ section or contact admin for specific questions about SOKOPLUS.",
                    "Is there anything else I can help you with today regarding SOKOPLUS?"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }
        
        // ============================================
        // BUSINESS TOOLS MODAL FUNCTIONS
        // ============================================
        
        function showBusinessModal(tool) {
            const modal = document.getElementById('businessModal');
            let content = '';
            
            switch(tool) {
                case 'analytics':
                    content = `
                        <div class="modal-content">
                            <button class="modal-close" onclick="closeModal('businessModal')">&times;</button>
                            <div style="padding: 2rem;">
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--business), #0891B2); 
                                         border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                                        <i class="fas fa-chart-line" style="font-size: 2rem; color: white;"></i>
                                    </div>
                                    <h3>Advanced Analytics</h3>
                                    <p style="color: var(--light-gray);">Track your business performance</p>
                                </div>
                                
                                <div style="background: var(--dark); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                                    <h4 style="margin-bottom: 1rem; color: var(--white);">Analytics Dashboard</h4>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1rem;">
                                        <div style="text-align: center; padding: 1rem; background: var(--dark-gray); border-radius: var(--radius);">
                                            <div style="font-size: 1.5rem; font-weight: 800; color: var(--business);" id="analyticsViews">0</div>
                                            <div style="font-size: 0.875rem; color: var(--light-gray);">Total Views</div>
                                        </div>
                                        <div style="text-align: center; padding: 1rem; background: var(--dark-gray); border-radius: var(--radius);">
                                            <div style="font-size: 1.5rem; font-weight: 800; color: var(--business);" id="analyticsEngagement">0%</div>
                                            <div style="font-size: 0.875rem; color: var(--light-gray);">Engagement Rate</div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-top: 1.5rem;">
                                        <h5 style="color: var(--white); margin-bottom: 1rem;">Top Performing Posts</h5>
                                        <div style="background: var(--dark-gray); padding: 1rem; border-radius: var(--radius);">
                                            <p style="color: var(--light-gray); font-size: 0.875rem;">Premium analytics coming soon!</p>
                                            <p style="color: var(--light-gray); font-size: 0.875rem;">Upgrade to access detailed insights, conversion tracking, and performance reports.</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn btn-business w-full" onclick="upgradeToPremium()">
                                    <i class="fas fa-crown"></i> Upgrade to Premium
                                </button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'upgrade':
                    content = `
                        <div class="modal-content">
                            <button class="modal-close" onclick="closeModal('businessModal')">&times;</button>
                            <div style="padding: 2rem;">
                                <div style="text-align: center; margin-bottom: 2rem;">
                                    <div style="width: 100px; height: 100px; background: linear-gradient(135deg, var(--secondary), var(--accent)); 
                                         border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; border: 3px solid var(--primary);">
                                        <i class="fas fa-crown" style="font-size: 3rem; color: var(--secondary);"></i>
                                    </div>
                                    <h3>Upgrade to Premium</h3>
                                    <div style="font-size: 2.5rem; font-weight: 800; color: var(--secondary); margin: 1rem 0;">
                                        KES 200/month
                                    </div>
                                    <p style="color: var(--light-gray);">Unlock all premium features</p>
                                </div>
                                
                                <div style="background: var(--dark); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                                    <h4 style="margin-bottom: 1rem; color: var(--white);">Premium Features:</h4>
                                    <ul style="color: var(--light-gray); padding-left: 1.5rem;">
                                        <li>Free Post Boosting (Save KES 100/post)</li>
                                        <li>Create Your Own Shop</li>
                                        <li>Advanced Analytics Dashboard</li>
                                        <li>Bulk CSV Product Upload</li>
                                        <li>Priority Customer Support</li>
                                        <li>No Ads Experience</li>
                                        <li>Shop Customization</li>
                                        <li>Inventory Management</li>
                                    </ul>
                                </div>
                                
                                <div class="payment-steps">
                                    <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
                                        <div style="width: 30px; height: 30px; background: var(--primary); color: var(--secondary); 
                                             border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                                            1
                                        </div>
                                        <div>
                                            <strong>Pay KES 200 via M-Pesa</strong>
                                            <p style="color: var(--light-gray); font-size: 0.875rem; margin-top: 0.25rem;">
                                                <strong>Paybill:</strong> 222111<br>
                                                <strong>Account:</strong> 5414200<br>
                                                <strong>Amount:</strong> KES 200
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
                                        <div style="width: 30px; height: 30px; background: var(--primary); color: var(--secondary); 
                                             border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                                            2
                                        </div>
                                        <div>
                                            <strong>Enter Transaction Code</strong>
                                            <input type="text" class="form-control" id="premiumTransactionCode" 
                                                   placeholder="Transaction Code" style="margin-top: 0.5rem;">
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="btn btn-secondary w-full" onclick="upgradeToPremium()">
                                    <i class="fas fa-bolt"></i> Upgrade Now
                                </button>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            modal.innerHTML = content;
            modal.classList.add('active');
        }
        
        async function upgradeToPremium() {
            const transactionCode = document.getElementById('premiumTransactionCode')?.value;
            if (!transactionCode || transactionCode.length < 8) {
                showNotification('Please enter a valid transaction code', 'error');
                return;
            }
            
            try {
                const response = await apiRequest('/users/upgrade', {
                    method: 'POST',
                    body: JSON.stringify({ transactionCode })
                });
                
                if (response) {
                    closeModal('businessModal');
                    showNotification('Premium upgrade request submitted for admin approval', 'success');
                    
                    // Update current user
                    currentUser.upgraded = true;
                    localStorage.setItem('sokoplus_user', JSON.stringify(currentUser));
                }
            } catch (error) {
                console.error('Error upgrading to premium:', error);
            }
        }
        
        // ============================================
        // FORM LOADING FUNCTIONS
        // ============================================
        
        function loadRegisterForm() {
            const form = document.getElementById('registerForm');
            if (!form) return;
            
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref') || '';
            
            form.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-control" id="registerName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-control" id="registerEmail" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone Number *</label>
                    <input type="text" class="form-control" id="registerPhone" placeholder="2547XXXXXXXX" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password *</label>
                    <input type="password" class="form-control" id="registerPassword" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Referral Code (Optional)</label>
                    <input type="text" class="form-control" id="registerReferral" value="${refCode}">
                </div>
                
                <button type="submit" class="btn btn-primary w-full">
                    <i class="fas fa-user-plus"></i> Create Account
                </button>
                
                <div class="text-center mt-3">
                    <p style="color: var(--light-gray);">
                        Already have an account? 
                        <a href="#" onclick="showPage('login'); return false;" style="color: var(--primary-light);">Login here</a>
                    </p>
                </div>
            `;
            
            form.onsubmit = async function(e) {
                e.preventDefault();
                
                const userData = {
                    name: document.getElementById('registerName').value,
                    email: document.getElementById('registerEmail').value,
                    phone: document.getElementById('registerPhone').value,
                    password: document.getElementById('registerPassword').value,
                    referralCode: document.getElementById('registerReferral').value
                };
                
                await registerUser(userData);
            };
        }
        
        function loadLoginForm() {
            const form = document.getElementById('loginForm');
            if (!form) return;
            
            form.innerHTML = `
                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-control" id="loginEmail" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Password *</label>
                    <input type="password" class="form-control" id="loginPassword" required>
                </div>
                
                <button type="submit" class="btn btn-primary w-full">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                
                <div class="text-center mt-3">
                    <a href="#" onclick="showPage('forgot-password'); return false;" style="color: var(--primary-light);">
                        Forgot password?
                    </a>
                    <p style="color: var(--light-gray); margin-top: 1rem;">
                        Don't have an account? 
                        <a href="#" onclick="showPage('register'); return false;" style="color: var(--primary-light);">Register here</a>
                    </p>
                </div>
            `;
            
            form.onsubmit = async function(e) {
                e.preventDefault();
                
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                await loginUser(email, password);
            };
        }
        
        function loadSubscriptionForm() {
            const form = document.getElementById('subscriptionForm');
            if (!form) return;
            
            form.innerHTML = `
                <div style="background: var(--dark); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                    <h4 style="color: var(--white); margin-bottom: 1rem;">Subscription Details</h4>
                    <ul style="color: var(--light-gray); padding-left: 1.5rem;">
                        <li>KES 50 per week</li>
                        <li>Unlimited free posts</li>
                        <li>Access to marketplace</li>
                        <li>Earn 50% referral commissions</li>
                        <li>Basic business tools</li>
                        <li>Admin approval required</li>
                    </ul>
                </div>
                
                <div class="payment-steps">
                    <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="width: 30px; height: 30px; background: var(--primary); color: var(--secondary); 
                             border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                            1
                        </div>
                        <div>
                            <strong>Pay KES 50 via M-Pesa</strong>
                            <p style="color: var(--light-gray); font-size: 0.875rem; margin-top: 0.25rem;">
                                <strong>Paybill:</strong> 222111<br>
                                <strong>Account:</strong> 5414200<br>
                                <strong>Amount:</strong> KES 50
                            </p>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="width: 30px; height: 30px; background: var(--primary); color: var(--secondary); 
                             border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">
                            2
                        </div>
                        <div>
                            <strong>Enter Transaction Code</strong>
                            <input type="text" class="form-control" id="subscriptionTransactionCode" 
                                   placeholder="Transaction Code" required>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary w-full" onclick="subscribeToPlatform()">
                    <i class="fas fa-check-circle"></i> Submit Subscription
                </button>
            `;
        }
        
        async function subscribeToPlatform() {
            const transactionCode = document.getElementById('subscriptionTransactionCode')?.value;
            if (!transactionCode || transactionCode.length < 8) {
                showNotification('Please enter a valid transaction code', 'error');
                return;
            }
            
            try {
                const response = await apiRequest('/subscriptions', {
                    method: 'POST',
                    body: JSON.stringify({ transactionCode })
                });
                
                if (response) {
                    showNotification('Subscription request submitted for admin approval', 'success');
                    showPage('dashboard');
                }
            } catch (error) {
                console.error('Error subscribing:', error);
            }
        }
        
        // ============================================
        // OTHER FUNCTIONS
        // ============================================
        
        async function viewPost(postId) {
            try {
                const response = await apiRequest(`/posts/${postId}`);
                if (response) {
                    const modal = document.getElementById('postModal');
                    let content = '';
                    
                    if (response.post.type === 'product') {
                        content = `
                            <div class="modal-content">
                                <button class="modal-close" onclick="closeModal('postModal')">&times;</button>
                                <div style="padding: 2rem;">
                                    <h3>${response.post.title}</h3>
                                    <div style="color: var(--secondary); font-size: 2rem; font-weight: 700; margin: 1rem 0;">
                                        ${formatPrice(response.post.price)}
                                    </div>
                                    <p style="color: var(--light-gray); margin-bottom: 1.5rem;">${response.post.description}</p>
                                    <div style="color: var(--light-gray); margin-bottom: 1rem;">
                                        <i class="fas fa-map-marker-alt"></i> ${response.post.location}
                                    </div>
                                    <div style="color: var(--light-gray); margin-bottom: 1.5rem;">
                                        <i class="fas fa-phone"></i> ${response.post.whatsapp}
                                    </div>
                                    <button class="btn btn-primary w-full" onclick="contactSeller('${response.post.whatsapp}')">
                                        <i class="fab fa-whatsapp"></i> Contact Seller
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                    
                    modal.innerHTML = content;
                    modal.classList.add('active');
                    
                    // Increment view count
                    await apiRequest(`/posts/${postId}/view`, { method: 'POST' });
                }
            } catch (error) {
                console.error('Error viewing post:', error);
            }
        }
        
        function contactSeller(whatsapp) {
            window.open(`https://wa.me/${whatsapp}`, '_blank');
        }
        
        async function likePost(postId) {
            try {
                await apiRequest(`/posts/${postId}/like`, { method: 'POST' });
                showNotification('Post liked!', 'success');
            } catch (error) {
                console.error('Error liking post:', error);
            }
        }
        
        function sharePost(postId) {
            const text = `Check out this post on SOKOPLUS: ${window.location.origin}`;
            if (navigator.share) {
                navigator.share({
                    title: 'SOKOPLUS Post',
                    text: text,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(text);
                showNotification('Post link copied to clipboard!', 'success');
            }
        }
        
        // ============================================
        // ADMIN FUNCTIONS (Basic implementation)
        // ============================================
        
        async function loadAdminPanel() {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('Admin access required', 'error');
                showPage('home');
                return;
            }
            
            try {
                const stats = await apiRequest('/admin/stats');
                if (stats) {
                    updateAdminStats(stats);
                }
                
                showAdminTab('pending');
            } catch (error) {
                console.error('Error loading admin panel:', error);
            }
        }
        
        function updateAdminStats(stats) {
            document.getElementById('adminUsers').textContent = stats.totalUsers || 0;
            document.getElementById('adminPosts').textContent = stats.totalPosts || 0;
            document.getElementById('adminPending').textContent = stats.pendingApprovals || 0;
            document.getElementById('adminRevenue').textContent = formatPrice(stats.totalRevenue || 0);
        }
        
        function showAdminTab(tabName) {
            document.querySelectorAll('.content-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            event.currentTarget.classList.add('active');
            
            // Basic implementation - would need more complex logic for full admin panel
            const content = document.getElementById('adminContent');
            content.innerHTML = `
                <div style="text-align: center; padding: 4rem 1rem;">
                    <i class="fas fa-tools" style="font-size: 4rem; color: var(--gray); margin-bottom: 1rem;"></i>
                    <h3 style="color: var(--white);">Admin Panel</h3>
                    <p style="color: var(--light-gray);">Full admin functionality available in the backend</p>
                </div>
            `;
        }
        
        // ============================================
        // GLOBAL FUNCTION EXPORTS
        // ============================================
        
        window.showPage = showPage;
        window.showHomeTab = showHomeTab;
        window.showDashboardTab = showDashboardTab;
        window.showAdminTab = showAdminTab;
        window.showShopTab = showShopTab;
        window.showPostForm = showPostForm;
        window.showBusinessModal = showBusinessModal;
        window.filterMarketplace = filterMarketplace;
        window.copyReferralLink = copyReferralLink;
        window.shareReferralLink = shareReferralLink;
        window.viewPost = viewPost;
        window.contactSeller = contactSeller;
        window.likePost = likePost;
        window.sharePost = sharePost;
        window.logout = logout;
        window.closeModal = closeModal;
        window.toggleChatbot = toggleChatbot;
        window.sendChatMessage = sendChatMessage;
        window.sendQuickQuestion = sendQuickQuestion;
        
    </script>
</body>
</html>
